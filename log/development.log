Connecting to database specified by database.yml


Started GET "/projects/6/scenes" for 127.0.0.1 at 2013-05-22 23:06:12 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (55.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (4.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (136.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:06:13.124283', "perishable_token" = '5Jd5bk0qySlFE9qVTzh', "updated_at" = '2013-05-23 03:06:13.125588' WHERE "users"."id" = 3
  [1m[36m (3.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 393ms (Views: 228.0ms | ActiveRecord: 10.4ms)


Started GET "/projects/6/scenes/10/edit" for 127.0.0.1 at 2013-05-22 23:06:15 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"6", "id"=>"10"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=10 )[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (126.6ms)
Completed 500 Internal Server Error in 139ms

ActionView::Template::Error (The single-table inheritance mechanism failed to locate the subclass: 'Hitomi'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Character.inheritance_column to use another column for that information.):
    25: 			  	 	  		<%end%>
    26: 
    27: 			  	 	  		<%unless event.is_a?(NarrationEvent)%>
    28: 			  	 	  		  <span class='muted'><%=event.to_sentence%></span><br/>
    29: 			  	 	  		<%end%>
    30: 			  	 	  		<small class="detail"><%=event.detail%></small>
    31: 
  app/models/events/character_pose_event.rb:14:in `to_sentence'
  app/views/scenes/edit.html.erb:28:in `block in _app_views_scenes_edit_html_erb__94605723798617352_2178912480'
  app/views/scenes/edit.html.erb:19:in `_app_views_scenes_edit_html_erb__94605723798617352_2178912480'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.3ms)
Connecting to database specified by database.yml


Started GET "/projects/6/scenes/10/edit" for 127.0.0.1 at 2013-05-22 23:06:54 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"6", "id"=>"10"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=10 )[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 2) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (247.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:06:55.467832', "perishable_token" = 'X6kzcr4nQdfNnfranb8g', "updated_at" = '2013-05-23 03:06:55.469374' WHERE "users"."id" = 3
  [1m[36m (39.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 497ms (Views: 336.1ms | ActiveRecord: 47.1ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:07:10 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (33.3ms)
Completed 200 OK in 41ms (Views: 37.9ms | ActiveRecord: 0.9ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:08:10 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.3ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.5ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (66.6ms)
Completed 200 OK in 74ms (Views: 70.5ms | ActiveRecord: 1.3ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:08:33 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:12:43 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (23.5ms)
Completed 200 OK in 30ms (Views: 27.0ms | ActiveRecord: 1.1ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:12:50 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (70.5ms)
Completed 200 OK in 76ms (Views: 73.7ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:13:16 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:14:41 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (25.0ms)
Completed 200 OK in 31ms (Views: 28.4ms | ActiveRecord: 1.3ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:15:00 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:17:10 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (68.0ms)
Completed 200 OK in 74ms (Views: 71.3ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:17:30 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:18:05 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (24.4ms)
Completed 200 OK in 32ms (Views: 29.2ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:18:24 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:18:59 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.5ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (27.2ms)
Completed 200 OK in 33ms (Views: 30.5ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:19:19 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:20:50 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.3ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (26.2ms)
Completed 200 OK in 33ms (Views: 29.4ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:21:08 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:22:00 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (26.3ms)
Completed 200 OK in 32ms (Views: 29.7ms | ActiveRecord: 1.0ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:23:31 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  Rendered projects/play.html.erb within layouts/viewer (68.0ms)
Completed 200 OK in 74ms (Views: 71.5ms | ActiveRecord: 0.9ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:23:51 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/play/6/Dream-Date/scene/10" for 127.0.0.1 at 2013-05-22 23:25:12 -0400
Processing by ProjectsController#play as HTML
  Parameters: {"id"=>"6", "basename"=>"Dream-Date", "scene_id"=>"10"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 AND "projects"."basename" = 'Dream-Date' LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 10 ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  Rendered projects/play.html.erb within layouts/viewer (26.0ms)
Completed 200 OK in 32ms (Views: 29.3ms | ActiveRecord: 1.1ms)


Started GET "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3" for 127.0.0.1 at 2013-05-22 23:26:02 -0400

ActionController::RoutingError (No route matches [GET] "/BackgroundMusic/Base/Out_To_Play_full_mix_mp3.mp3"):
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/projects/6/scenes/10/edit?event_index=10" for 127.0.0.1 at 2013-05-22 23:30:39 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"10", "project_id"=>"6", "id"=>"10"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 10) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=10 )
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 6[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (237.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:30:39.544435', "perishable_token" = 'p5QNuejt9SyNVbs8eo', "updated_at" = '2013-05-23 03:30:39.545670' WHERE "users"."id" = 3[0m
  [1m[35m (153.7ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 506ms (Views: 318.7ms | ActiveRecord: 158.5ms)


Started GET "/projects/6/scenes/10/edit?event_index=10" for 127.0.0.1 at 2013-05-22 23:32:06 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"10", "project_id"=>"6", "id"=>"10"}
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 10) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=10 )[0m
  [1m[35mEvent Load (0.6ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 2) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (55.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:32:06.864665', "perishable_token" = 'K2yhRQys4urcXZa6QMQO', "updated_at" = '2013-05-23 03:32:06.865416' WHERE "users"."id" = 3
  [1m[36m (39.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 113ms (Views: 66.2ms | ActiveRecord: 42.9ms)


Started GET "/projects/6/scenes" for 127.0.0.1 at 2013-05-22 23:32:20 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (6.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (31.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:32:20.518014', "perishable_token" = 'RuitAVzXVVxHpJoheOHH', "updated_at" = '2013-05-23 03:32:20.518670' WHERE "users"."id" = 3
  [1m[36m (46.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 91ms (Views: 40.3ms | ActiveRecord: 49.3ms)


Started GET "/projects/6" for 127.0.0.1 at 2013-05-22 23:32:22 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.6ms)
  Rendered projects/show.html.erb within layouts/application (13.6ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:32:22.753957', "perishable_token" = 'gtv0VBXLdGCE9rsGv0y', "updated_at" = '2013-05-23 03:32:22.754650' WHERE "users"."id" = 3
  [1m[36m (41.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 72ms (Views: 26.2ms | ActiveRecord: 43.8ms)


Started GET "/projects/6/scenes" for 127.0.0.1 at 2013-05-22 23:32:27 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (66.9ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:32:27.328505', "perishable_token" = '2G7TZqOuVSkQ7IvpATQ', "updated_at" = '2013-05-23 03:32:27.329169' WHERE "users"."id" = 3
  [1m[36m (40.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 120ms (Views: 75.9ms | ActiveRecord: 42.5ms)


Started GET "/projects/6" for 127.0.0.1 at 2013-05-22 23:32:30 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.7ms)
  Rendered projects/show.html.erb within layouts/application (12.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:32:30.489201', "perishable_token" = 'hEenm2ZBg3YmbVpSFuy', "updated_at" = '2013-05-23 03:32:30.489814' WHERE "users"."id" = 3
  [1m[36m (44.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 70ms (Views: 22.2ms | ActiveRecord: 46.6ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:32:33 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  Rendered characters/index.html.erb within layouts/application (10.9ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (uninitialized constant Character::Ami):
    2: <h2>Characters</h2>
    3: <ul class="thumbnails character-index">
    4: 	
    5: 	<% Character.all_available.each do |named_character| %>
    6: 	  <li class="span3">
    7: 		<div class="thumbnail">
    8: 		<img data-src="holder.js/300x200" alt="" style="width:300px;height:200px; background-color:lightgray">
  app/models/character.rb:18:in `all_available'
  app/views/characters/index.html.erb:5:in `_app_views_characters_index_html_erb__4339978606982742676_2168640120'
  app/controllers/characters_controller.rb:7:in `index'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.2ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:32:57 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36mNarrator Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=6) LIMIT 1[0m
  [1m[35mHitomi Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=6) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (27.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:32:57.415403', "perishable_token" = 'NlfsDtFvKJhso2GDp6n', "updated_at" = '2013-05-23 03:32:57.416698' WHERE "users"."id" = 3[0m
  [1m[35m (39.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 164ms (Views: 106.2ms | ActiveRecord: 42.6ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:33:18 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36mNarrator Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=6) LIMIT 1[0m
  [1m[35mHitomi Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=6) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (6.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:33:18.769832', "perishable_token" = '0B9ligmFeyl4wRrJgsW', "updated_at" = '2013-05-23 03:33:18.770972' WHERE "users"."id" = 3[0m
  [1m[35m (44.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 68ms (Views: 20.3ms | ActiveRecord: 46.4ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:35:53 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36mNarrator Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=6) LIMIT 1[0m
  [1m[35mHitomi Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=6) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (8.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:35:54.011556', "perishable_token" = '1QmgTvnVYuntQIEzhg', "updated_at" = '2013-05-23 03:35:54.012388' WHERE "users"."id" = 3[0m
  [1m[35m (280.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 305ms (Views: 22.2ms | ActiveRecord: 282.0ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:37:37 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36mNarrator Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=6) LIMIT 1[0m
  [1m[35mHitomi Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=6) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (3.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:37:37.810366', "perishable_token" = 'iN3YkqiOUAA9vtJIBti', "updated_at" = '2013-05-23 03:37:37.811235' WHERE "users"."id" = 3[0m
  [1m[35m (43.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 63ms (Views: 16.1ms | ActiveRecord: 45.2ms)


Started PUT "/projects/6/characters/10" for 127.0.0.1 at 2013-05-22 23:37:45 -0400
Processing by CharactersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "character"=>{"name"=>"Betty"}, "project_id"=>"6", "id"=>"10"}
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mUPDATE "characters" SET "name" = 'Betty', "updated_at" = '2013-05-23 03:37:45.853608' WHERE "characters"."type" IN ('Hitomi') AND "characters"."id" = 10[0m
  [1m[35m (44.8ms)[0m  commit transaction
Redirected to http://localhost:3000/projects/6/characters
Completed 302 Found in 54ms (ActiveRecord: 45.8ms)


Started GET "/projects/6/characters" for 127.0.0.1 at 2013-05-22 23:37:45 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mNarrator Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=6) LIMIT 1
  [1m[36mHitomi Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=6) LIMIT 1[0m
  Rendered characters/index.html.erb within layouts/application (3.9ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:37:45.929541', "perishable_token" = 'Fov4BSHKrjwwpI54VSI', "updated_at" = '2013-05-23 03:37:45.930350' WHERE "users"."id" = 3
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 23ms (Views: 14.7ms | ActiveRecord: 6.7ms)


Started GET "/projects/6" for 127.0.0.1 at 2013-05-22 23:38:14 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (46.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.5ms)
  Rendered projects/show.html.erb within layouts/application (112.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:38:14.541767', "perishable_token" = 'qwUE1m21WDQixQ2uBcB7', "updated_at" = '2013-05-23 03:38:14.543065' WHERE "users"."id" = 3
  [1m[36m (39.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 246ms (Views: 193.1ms | ActiveRecord: 43.7ms)


Started GET "/projects/6/scenes" for 127.0.0.1 at 2013-05-22 23:38:16 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (3.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (24.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:38:16.367399', "perishable_token" = 'ViikiRNsgHG4woZdZ', "updated_at" = '2013-05-23 03:38:16.368025' WHERE "users"."id" = 3
  [1m[36m (39.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 80ms (Views: 35.7ms | ActiveRecord: 42.1ms)


Started GET "/projects/6/scenes/10/edit" for 127.0.0.1 at 2013-05-22 23:38:17 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"6", "id"=>"10"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "10"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=10 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 2) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 10) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 11 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 10 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (212.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:38:18.192691', "perishable_token" = 'WrfDAbNeRSLFfj44WMzg', "updated_at" = '2013-05-23 03:38:18.193341' WHERE "users"."id" = 3
  [1m[36m (39.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 270ms (Views: 222.6ms | ActiveRecord: 43.1ms)


Started GET "/projects/6/scenes" for 127.0.0.1 at 2013-05-22 23:38:25 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 15
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=15 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (22.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:38:25.241037', "perishable_token" = 'LOQtTy8SFZ8QeRzLFjiJ', "updated_at" = '2013-05-23 03:38:25.241620' WHERE "users"."id" = 3
  [1m[36m (44.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 80ms (Views: 32.1ms | ActiveRecord: 46.9ms)


Started GET "/projects/6" for 127.0.0.1 at 2013-05-22 23:38:26 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"6"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 10[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index = 9) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=10 ) AND (order_index <= 9) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 6[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=6 ) AND (order_index = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 11[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=11 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.9ms)
  Rendered projects/show.html.erb within layouts/application (13.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:38:26.944262', "perishable_token" = '17ZLPMDHpUnqMpJbSGqZ', "updated_at" = '2013-05-23 03:38:26.944899' WHERE "users"."id" = 3
  [1m[36m (43.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 129ms (Views: 81.5ms | ActiveRecord: 45.6ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:38:29 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:38:29.199297', "perishable_token" = 'hiol0bDlRQIYAiyZpivd', "updated_at" = '2013-05-23 03:38:29.199909' WHERE "users"."id" = 3[0m
  [1m[35m (39.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.2ms)
  Rendered projects/index.html.erb within layouts/application (12.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 64ms (Views: 17.1ms | ActiveRecord: 41.8ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:39:40 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:39:40.999557', "perishable_token" = 'i5XFrZK1kBugBpJcx', "updated_at" = '2013-05-23 03:39:41.000279' WHERE "users"."id" = 3[0m
  [1m[35m (41.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.3ms)
  Rendered projects/index.html.erb within layouts/application (15.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 70ms (Views: 20.7ms | ActiveRecord: 43.4ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:40:06 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:40:06.420548', "perishable_token" = 'XTxMxVSXcU74kgre6LIO', "updated_at" = '2013-05-23 03:40:06.421267' WHERE "users"."id" = 3[0m
  [1m[35m (43.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.3ms)
  Rendered projects/index.html.erb within layouts/application (12.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 69ms (Views: 18.4ms | ActiveRecord: 45.2ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:40:16 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:40:16.123923', "perishable_token" = 'cIA2jW9q1HcBDn0ce4Ch', "updated_at" = '2013-05-23 03:40:16.124443' WHERE "users"."id" = 3[0m
  [1m[35m (44.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.2ms)
  Rendered projects/index.html.erb within layouts/application (61.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 118ms (Views: 66.3ms | ActiveRecord: 46.6ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:41:13 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:41:13.555799', "perishable_token" = 'k8W5qutEdn7Btw5My3K', "updated_at" = '2013-05-23 03:41:13.556522' WHERE "users"."id" = 3[0m
  [1m[35m (41.7ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.5ms)
  Rendered projects/index.html.erb within layouts/application (17.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 73ms (Views: 22.3ms | ActiveRecord: 44.0ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-22 23:41:46 -0400
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:41:46.432711', "perishable_token" = 'lsol4GYvTyjqteMJabZ', "updated_at" = '2013-05-23 03:41:46.433445' WHERE "users"."id" = 3[0m
  [1m[35m (44.5ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (0.3ms)
  Rendered projects/index.html.erb within layouts/application (18.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 76ms (Views: 23.5ms | ActiveRecord: 46.9ms)


Started GET "/projects/8" for 127.0.0.1 at 2013-05-22 23:41:52 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.3ms)
  Rendered projects/show.html.erb within layouts/application (12.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:41:52.286328', "perishable_token" = 'hjUqATrMK2b9358teUuR', "updated_at" = '2013-05-23 03:41:52.286933' WHERE "users"."id" = 3
  [1m[36m (3.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 30ms (Views: 23.3ms | ActiveRecord: 5.0ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:42:02 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (54.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (64.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:42:02.458212', "perishable_token" = 'sCoBzQ6v1TgbA3sUwMb', "updated_at" = '2013-05-23 03:42:02.458835' WHERE "users"."id" = 3
  [1m[36m (42.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 123ms (Views: 77.4ms | ActiveRecord: 44.0ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-22 23:42:04 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "16"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=16 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (37.1ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:42:04.536086', "perishable_token" = 'tm8uzu6lpxm0nnmnxXSM', "updated_at" = '2013-05-23 03:42:04.536628' WHERE "users"."id" = 3
  [1m[36m (46.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 98ms (Views: 46.0ms | ActiveRecord: 48.8ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:44:00 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (11.0ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:44:00.564943', "perishable_token" = '5XdzznA3aOxjptJ279u', "updated_at" = '2013-05-23 03:44:00.565485' WHERE "users"."id" = 3
  [1m[36m (7.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 30ms (Views: 20.1ms | ActiveRecord: 8.7ms)
Connecting to database specified by database.yml


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:50:32 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (55.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (124.9ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:50:33.035863', "perishable_token" = 'Ugo0f15Gjo9IHJkFR67', "updated_at" = '2013-05-23 03:50:33.037543' WHERE "users"."id" = 3
  [1m[36m (99.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 418ms (Views: 216.5ms | ActiveRecord: 105.1ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:53:26 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (30.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/index.html.erb within layouts/application (40.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:53:26.386711', "perishable_token" = 'SuMuQmdFFsddxBU6KplU', "updated_at" = '2013-05-23 03:53:26.387478' WHERE "users"."id" = 3[0m
  [1m[35m (43.7ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 101ms (Views: 53.7ms | ActiveRecord: 45.8ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:55:57 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (5.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (14.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:55:57.501286', "perishable_token" = 'GqFW8LrZflnmeHmIwzC', "updated_at" = '2013-05-23 03:55:57.501922' WHERE "users"."id" = 3
  [1m[36m (43.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 72ms (Views: 24.6ms | ActiveRecord: 45.2ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:56:38 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (4.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/index.html.erb within layouts/application (12.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 03:56:38.307001', "perishable_token" = '8Fv3YzbiMJoMzHFwV9e', "updated_at" = '2013-05-23 03:56:38.307556' WHERE "users"."id" = 3[0m
  [1m[35m (45.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 72ms (Views: 23.2ms | ActiveRecord: 47.8ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-22 23:59:10 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (10.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 03:59:10.405010', "perishable_token" = 'UxJwU74Cqgok7SQuPQli', "updated_at" = '2013-05-23 03:59:10.405780' WHERE "users"."id" = 3
  [1m[36m (46.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 70ms (Views: 21.2ms | ActiveRecord: 47.5ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 00:00:16 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "16"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=16 )[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (75.0ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:00:16.495723', "perishable_token" = '9NSOLPX8RYeooRrkgZa', "updated_at" = '2013-05-23 04:00:16.496378' WHERE "users"."id" = 3
  [1m[36m (39.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 132ms (Views: 85.4ms | ActiveRecord: 42.4ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 00:02:07 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "16"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=16 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (33.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:02:08.045417', "perishable_token" = 'VZilfqeqbTtL1nSCb0b', "updated_at" = '2013-05-23 04:02:08.046041' WHERE "users"."id" = 3
  [1m[36m (43.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 97ms (Views: 45.9ms | ActiveRecord: 46.5ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:02:33 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (5.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/index.html.erb within layouts/application (13.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:02:33.393548', "perishable_token" = 'vR2DEG4RvCUePFUmVmGr', "updated_at" = '2013-05-23 04:02:33.394212' WHERE "users"."id" = 3[0m
  [1m[35m (274.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 302ms (Views: 24.1ms | ActiveRecord: 276.3ms)


Started GET "/projects/8" for 127.0.0.1 at 2013-05-23 00:02:36 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (3.7ms)
  Rendered projects/show.html.erb within layouts/application (13.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:02:36.727440', "perishable_token" = 'tJDZyye6FWWHjbKoql', "updated_at" = '2013-05-23 04:02:36.728070' WHERE "users"."id" = 3[0m
  [1m[35m (41.0ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 117ms (Views: 71.2ms | ActiveRecord: 42.6ms)


Started GET "/projects/8/characters" for 127.0.0.1 at 2013-05-23 00:02:39 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mNarrator Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=8) LIMIT 1[0m
  [1m[35mHitomi Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=8) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (6.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:02:39.775722', "perishable_token" = 'WVwobvY1OZrLnQeJQXg', "updated_at" = '2013-05-23 04:02:39.776560' WHERE "users"."id" = 3[0m
  [1m[35m (3.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 27ms (Views: 20.5ms | ActiveRecord: 4.7ms)


Started PUT "/projects/8/characters/14" for 127.0.0.1 at 2013-05-23 00:02:49 -0400
Processing by CharactersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "character"=>{"name"=>"Carabella"}, "project_id"=>"8", "id"=>"14"}
  [1m[35mCharacter Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = ? LIMIT 1  [["id", "14"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mUPDATE "characters" SET "name" = 'Carabella', "updated_at" = '2013-05-23 04:02:49.451643' WHERE "characters"."type" IN ('Hitomi') AND "characters"."id" = 14[0m
  [1m[35m (43.9ms)[0m  commit transaction
Redirected to http://localhost:3000/projects/8/characters
Completed 302 Found in 53ms (ActiveRecord: 44.8ms)


Started GET "/projects/8/characters" for 127.0.0.1 at 2013-05-23 00:02:49 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mNarrator Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=8) LIMIT 1
  [1m[36mHitomi Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=8) LIMIT 1[0m
  Rendered characters/index.html.erb within layouts/application (5.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:02:49.527998', "perishable_token" = 'ooDoJnZ1ePbwBFThmRhr', "updated_at" = '2013-05-23 04:02:49.529147' WHERE "users"."id" = 3
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 28ms (Views: 20.7ms | ActiveRecord: 6.1ms)


Started PUT "/projects/8/characters/15" for 127.0.0.1 at 2013-05-23 00:02:55 -0400
Processing by CharactersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "character"=>{"name"=>"Winston"}, "project_id"=>"8", "id"=>"15"}
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = ? LIMIT 1[0m  [["id", "15"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "characters" SET "name" = 'Winston', "updated_at" = '2013-05-23 04:02:55.947654' WHERE "characters"."type" IN ('Narrator') AND "characters"."id" = 15
  [1m[36m (39.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/projects/8/characters
Completed 302 Found in 46ms (ActiveRecord: 40.4ms)


Started GET "/projects/8/characters" for 127.0.0.1 at 2013-05-23 00:02:56 -0400
Processing by CharactersController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mNarrator Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Narrator') AND (project_id=8) LIMIT 1[0m
  [1m[35mHitomi Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."type" IN ('Hitomi') AND (project_id=8) LIMIT 1
  Rendered characters/index.html.erb within layouts/application (4.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:02:56.017459', "perishable_token" = 'VbLzas96YdqpJn2BhA', "updated_at" = '2013-05-23 04:02:56.018406' WHERE "users"."id" = 3[0m
  [1m[35m (5.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 24ms (Views: 15.3ms | ActiveRecord: 6.9ms)


Started GET "/projects/8" for 127.0.0.1 at 2013-05-23 00:02:58 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.3ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (4.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.8ms)
  Rendered projects/show.html.erb within layouts/application (13.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:02:58.823297', "perishable_token" = 'W0NSuEWazA88nYH4dpI9', "updated_at" = '2013-05-23 04:02:58.823948' WHERE "users"."id" = 3[0m
  [1m[35m (46.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 75ms (Views: 24.0ms | ActiveRecord: 48.6ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:03:01 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (5.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (15.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:03:01.062458', "perishable_token" = 'xRYIaI7gYW70ska1w5E', "updated_at" = '2013-05-23 04:03:01.063029' WHERE "users"."id" = 3
  [1m[36m (44.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 73ms (Views: 25.1ms | ActiveRecord: 46.4ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 00:03:04 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "16"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=16 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (36.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:03:04.817712', "perishable_token" = 'KVrotrDTnHMRISzfxIeK', "updated_at" = '2013-05-23 04:03:04.818268' WHERE "users"."id" = 3
  [1m[36m (39.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 91ms (Views: 46.6ms | ActiveRecord: 41.9ms)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateProjects (20130517043538)
Migrating to CreateCharacters (20130517060402)
Migrating to AddDescriptionToCharacters (20130517141850)
Migrating to CreateScenes (20130517151745)
Migrating to CreateEvents (20130517152030)
Migrating to ChangeEvents (20130517161208)
Migrating to AddCharacterTypeToEvent (20130518205250)
Migrating to AddTextToEvent (20130519045318)
Migrating to AddBasenameToProject (20130520193719)
Migrating to CreateUsers (20130521013447)
Migrating to AddCharactersPresentToEvent (20130521065105)
Migrating to AddLoveSceneToScenes (20130523040642)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "scenes" ADD "love_scene" boolean
  [1m[36m (0.6ms)[0m  [1mCREATE TEMPORARY TABLE "altered_characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "description" text) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "temp_index_altered_characters_on_type_and_project_id" ON "altered_characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "temp_index_altered_characters_on_project_id" ON "altered_characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "characters"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608', 'She''s the school''s star student, but is shy around boys.')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186', 'The mysterious new transfer student. Some people are afraid of him, but he''s really just shy around girls.')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630', '')
  [1m[36m (0.6ms)[0m  [1mDROP TABLE "characters"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_characters_on_project_id" ON "characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_characters_on_type_and_project_id" ON "characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_characters"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630')[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "altered_characters"
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateProjects (20130517043538)
Migrating to CreateCharacters (20130517060402)
Migrating to AddDescriptionToCharacters (20130517141850)
Migrating to CreateScenes (20130517151745)
Migrating to CreateEvents (20130517152030)
Migrating to ChangeEvents (20130517161208)
Migrating to AddCharacterTypeToEvent (20130518205250)
Migrating to AddTextToEvent (20130519045318)
Migrating to AddBasenameToProject (20130520193719)
Migrating to CreateUsers (20130521013447)
Migrating to AddCharactersPresentToEvent (20130521065105)
Migrating to AddLoveSceneToScenes (20130523040642)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "scenes" ADD "love_scene" boolean
  [1m[36m (0.6ms)[0m  [1mCREATE TEMPORARY TABLE "altered_characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "description" text) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "temp_index_altered_characters_on_type_and_project_id" ON "altered_characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "temp_index_altered_characters_on_project_id" ON "altered_characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "characters"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608', 'She''s the school''s star student, but is shy around boys.')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186', 'The mysterious new transfer student. Some people are afraid of him, but he''s really just shy around girls.')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630', '')
  [1m[36m (0.4ms)[0m  [1mDROP TABLE "characters"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_characters_on_project_id" ON "characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_characters_on_type_and_project_id" ON "characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_characters"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630')[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "altered_characters"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "event" ADD "character_name" varchar(255)[0m
SQLite3::SQLException: no such table: event: ALTER TABLE "event" ADD "character_name" varchar(255)
  [1m[35m (1.2ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateProjects (20130517043538)
Migrating to CreateCharacters (20130517060402)
Migrating to AddDescriptionToCharacters (20130517141850)
Migrating to CreateScenes (20130517151745)
Migrating to CreateEvents (20130517152030)
Migrating to ChangeEvents (20130517161208)
Migrating to AddCharacterTypeToEvent (20130518205250)
Migrating to AddTextToEvent (20130519045318)
Migrating to AddBasenameToProject (20130520193719)
Migrating to CreateUsers (20130521013447)
Migrating to AddCharactersPresentToEvent (20130521065105)
Migrating to AddLoveSceneToScenes (20130523040642)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "scenes" ADD "love_scene" boolean
  [1m[36m (0.5ms)[0m  [1mCREATE TEMPORARY TABLE "altered_characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "description" text) [0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "temp_index_altered_characters_on_type_and_project_id" ON "altered_characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "temp_index_altered_characters_on_project_id" ON "altered_characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "characters"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608', 'She''s the school''s star student, but is shy around boys.')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186', 'The mysterious new transfer student. Some people are afraid of him, but he''s really just shy around girls.')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004', '')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697', '')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "altered_characters" ("id","project_id","name","type","created_at","updated_at","description") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630', '')
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "characters"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "characters" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "project_id" integer, "name" varchar(255), "type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_characters_on_project_id" ON "characters" ("project_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_characters_on_type_and_project_id" ON "characters" ("type", "project_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_characters"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (10, 6, 'Betty', 'Hitomi', '2013-05-20 06:38:12.610420', '2013-05-23 03:37:45.853608')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (11, 6, 'Edgeworth', 'Narrator', '2013-05-20 06:38:14.521150', '2013-05-20 08:00:34.779186')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (12, 7, 'Hitomi', 'Hitomi', '2013-05-22 17:34:17.655106', '2013-05-22 17:34:17.655106')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (13, 7, 'Narrator', 'Narrator', '2013-05-22 17:34:17.658081', '2013-05-22 17:34:17.658081')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (14, 8, 'Carabella', 'Hitomi', '2013-05-22 18:39:59.077132', '2013-05-23 04:02:49.451643')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (15, 8, 'Winston', 'Narrator', '2013-05-22 18:39:59.081684', '2013-05-23 04:02:55.947654')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (16, 9, 'Hitomi', 'Hitomi', '2013-05-22 18:40:15.634468', '2013-05-22 18:40:15.634468')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (17, 9, 'Narrator', 'Narrator', '2013-05-22 18:40:15.638004', '2013-05-22 18:40:15.638004')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (18, 10, 'Hitomi', 'Hitomi', '2013-05-22 19:04:20.315697', '2013-05-22 19:04:20.315697')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "characters" ("id","project_id","name","type","created_at","updated_at") VALUES (19, 10, 'Narrator', 'Narrator', '2013-05-22 19:04:20.319630', '2013-05-22 19:04:20.319630')[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "altered_characters"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "events" ADD "character_name" varchar(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130523040642')
  [1m[36m (48.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:10:01 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (118.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/index.html.erb within layouts/application (187.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:10:01.773100', "perishable_token" = 'Nx7swN5pXlmx2xX3reH4', "updated_at" = '2013-05-23 04:10:01.774477' WHERE "users"."id" = 3[0m
  [1m[35m (40.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 379ms (Views: 242.0ms | ActiveRecord: 45.5ms)


Started POST "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:10:20 -0400
Processing by ScenesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "scene"=>{"love_scene"=>"true", "initial_event_pack"=>"0"}, "project_id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
Completed 500 Internal Server Error in 3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: love_scene):
  app/controllers/scenes_controller.rb:55:in `create'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.1ms)


Started POST "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:10:38 -0400
Processing by ScenesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "scene"=>{"love_scene"=>"true", "initial_event_pack"=>"0"}, "project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("scenes"."order_index") AS max_id FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("events"."order_index") AS max_id FROM "events" WHERE "events"."scene_id" IS NULL
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "scenes" ("created_at", "custom_description", "love_scene", "order_index", "project_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Thu, 23 May 2013 04:10:38 UTC +00:00], ["custom_description", nil], ["love_scene", true], ["order_index", 2], ["project_id", 8], ["updated_at", Thu, 23 May 2013 04:10:38 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", nil], ["character_name", nil], ["character_type", nil], ["characters_present", "--- []\n"], ["created_at", Thu, 23 May 2013 04:10:38 UTC +00:00], ["filename", "/BackgroundImage/Base/school_roof.jpg"], ["order_index", 1], ["scene_id", 17], ["subfilename", nil], ["text", nil], ["type", "BackgroundImageEvent"], ["updated_at", Thu, 23 May 2013 04:10:38 UTC +00:00]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 1 AND (scene_id=17 )[0m
  [1m[35m (41.1ms)[0m  commit transaction
Redirected to http://localhost:3000/projects/8/scenes/17/edit
Completed 302 Found in 162ms (ActiveRecord: 44.1ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 00:10:38 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (60.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:10:39.005338', "perishable_token" = 'SZRAARedEGhGEanZbm', "updated_at" = '2013-05-23 04:10:39.006830' WHERE "users"."id" = 3
  [1m[36m (184.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 333ms (Views: 142.2ms | ActiveRecord: 187.4ms)
Connecting to database specified by database.yml


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:15:00 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (112.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (139.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:15:00.576033', "perishable_token" = 'D0MFTffvJN3ZpEogBYoO', "updated_at" = '2013-05-23 04:15:00.577218' WHERE "users"."id" = 3
  [1m[36m (46.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 243ms (Views: 176.6ms | ActiveRecord: 50.8ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:15:04 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (5.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (19.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:15:04.473224', "perishable_token" = 'g3ROO0dR9rJjOuaUGdEJ', "updated_at" = '2013-05-23 04:15:04.473880' WHERE "users"."id" = 3
  [1m[36m (39.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 72ms (Views: 29.0ms | ActiveRecord: 41.9ms)


Started POST "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 00:15:22 -0400
Processing by ScenesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2yYVQTJ1sAm3oL5vMe+JRZVPNiU6GHoyEJHCk6YuKzo=", "scene"=>{"love_scene"=>"true", "initial_event_pack"=>"3"}, "project_id"=>"8"}
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("scenes"."order_index") AS max_id FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("events"."order_index") AS max_id FROM "events" WHERE "events"."scene_id" IS NULL
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "scenes" ("created_at", "custom_description", "love_scene", "order_index", "project_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Thu, 23 May 2013 04:15:22 UTC +00:00], ["custom_description", nil], ["love_scene", true], ["order_index", 3], ["project_id", 8], ["updated_at", Thu, 23 May 2013 04:15:22 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", nil], ["character_name", nil], ["character_type", nil], ["characters_present", "--- []\n"], ["created_at", Thu, 23 May 2013 04:15:22 UTC +00:00], ["filename", "/BackgroundImage/Base/her_bedroom.jpg"], ["order_index", 1], ["scene_id", 18], ["subfilename", nil], ["text", nil], ["type", "BackgroundImageEvent"], ["updated_at", Thu, 23 May 2013 04:15:22 UTC +00:00]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 18 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 1 AND (scene_id=18 )[0m
  [1m[35m (46.2ms)[0m  commit transaction
Redirected to http://localhost:3000/projects/8/scenes/18/edit
Completed 302 Found in 71ms (ActiveRecord: 48.2ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:15:22 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (34.0ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:15:22.459177', "perishable_token" = 'LWJ3AIHR09HARptORUNW', "updated_at" = '2013-05-23 04:15:22.459841' WHERE "users"."id" = 3
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 55ms (Views: 45.5ms | ActiveRecord: 5.5ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:16:47 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (126.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:16:47.971352', "perishable_token" = 't5wyP57YSsooMWd1b9l', "updated_at" = '2013-05-23 04:16:47.972664' WHERE "users"."id" = 3
  [1m[36m (41.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 286ms (Views: 208.5ms | ActiveRecord: 45.3ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:19:04 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."character_type" = 'Narrator' LIMIT 1[0m
SQLite3::SQLException: no such column: characters.character_type: SELECT  "characters".* FROM "characters"  WHERE "characters"."project_id" = 8 AND "characters"."character_type" = 'Narrator' LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (17.1ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (SQLite3::SQLException: no such column: characters.character_type: SELECT  "characters".* FROM "characters"  WHERE "characters"."project_id" = 8 AND "characters"."character_type" = 'Narrator' LIMIT 1):
    50: 			  	    </tbody>
    51: 			  	 </table></div> 
    52: 			  	 <h3>Add to the Script!</h3>
    53: 			  	<%character = @project.characters.where(:character_type=>"Narrator").first%>
    54: 	  	        <table class="action-items">
    55: 			  	 	<tr><td rowspan=3 class="icon"><span class="btn"><%=image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px"%></span></td>
    56: 			  	 	<td class="btn btn-small"><a href="#" class="edit-speak" data-type="NarrationEvent" data-character-id="<%=character.id%>" data-name="">Narration</td></tr>
  app/views/scenes/edit.html.erb:53:in `_app_views_scenes_edit_html_erb__3290528582916167801_2168548980'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.3ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:19:36 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (70.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:19:36.183803', "perishable_token" = 'DOXCfD9BGsApINuBqDcJ', "updated_at" = '2013-05-23 04:19:36.184468' WHERE "users"."id" = 3
  [1m[36m (47.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 136ms (Views: 82.9ms | ActiveRecord: 49.7ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:23:15 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (31.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:23:15.465368', "perishable_token" = 'ReKeM9zLwo8Z8a8KqOX', "updated_at" = '2013-05-23 04:23:15.466030' WHERE "users"."id" = 3[0m
  [1m[35m (43.2ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 92ms (Views: 43.3ms | ActiveRecord: 45.9ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:23:33 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (25.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:23:34.035397', "perishable_token" = 'Hcy6Q8aMw51dl5Qvjs', "updated_at" = '2013-05-23 04:23:34.036245' WHERE "users"."id" = 3
  [1m[36m (47.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 92ms (Views: 38.9ms | ActiveRecord: 49.4ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:23:56 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (31.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:23:56.811388', "perishable_token" = 'BKmQ4jvd3KQhAA93wBFO', "updated_at" = '2013-05-23 04:23:56.812134' WHERE "users"."id" = 3[0m
  [1m[35m (46.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 96ms (Views: 44.0ms | ActiveRecord: 48.8ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:26:14 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (27.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:26:14.392915', "perishable_token" = '8kzNJMQKOPX8zhPiZKiC', "updated_at" = '2013-05-23 04:26:14.393558' WHERE "users"."id" = 3
  [1m[36m (44.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 90ms (Views: 39.6ms | ActiveRecord: 47.2ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:26:36 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (75.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:26:36.275528', "perishable_token" = 'IkrclycF8uMMaqYxyxp', "updated_at" = '2013-05-23 04:26:36.276192' WHERE "users"."id" = 3[0m
  [1m[35m (42.5ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 139ms (Views: 89.9ms | ActiveRecord: 44.9ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:49:38 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
ERROR: compiling _app_views_scenes_edit_html_erb__3290528582916167801_2183876560 RAISED /Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:208: syntax error, unexpected '<', expecting keyword_end
		      <%else
		       ^
/Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:208: unknown type of %string
		      <%else
		          ^
Function body:           def _app_views_scenes_edit_html_erb__3290528582916167801_2183876560(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "scenes/edit";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;
  current_event = Event.for_scene(@scene).at(@event_index).first
  bg_file =  @scene.image_at(@event_index).get_file

@output_buffer.safe_concat('<table class="scene-editor">
	<tr>
		<td>
			
			  <p><b>Scene ');@output_buffer.append= (@scene.order_index);@output_buffer.safe_concat(':</b> ');@output_buffer.append= (@scene.get_description);@output_buffer.safe_concat('</p>
			<table class="table table-condensed">
			  <tr><td>
			  	 <h2>Script</h2>
			  	 <div class="script-holder">
			  	 <table class="script table-bordered table-hover table-condensed">
			  	 	<tbody>
');			  	 	if Event.for_scene(@scene).empty?
@output_buffer.safe_concat('			  	 	  <tr><td>Nothing in the script yet.</td></tr>
');			  	 	end
			  	 	Event.for_scene(@scene).ordered.each do |event|
@output_buffer.safe_concat('			  	 	  <tr data-order-id="');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('" data-id="');@output_buffer.append= (event.id);@output_buffer.safe_concat('" id="row');@output_buffer.append= (event.id);@output_buffer.safe_concat('" class="');@output_buffer.append= ("selected" if @event_index==event.order_index);@output_buffer.safe_concat('">
			  	 	  	<td>');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('</td>
			  	 	  	<td>
');			  	 	  		if @event_index!=event.order_index
@output_buffer.safe_concat('			  	 	  		  <div class="jump-to tippable" title="Jump Here" data-url="');@output_buffer.append= (edit_project_scene_url(@project, @scene, :event_index=>event.order_index));@output_buffer.safe_concat('">
');			  	 	  		end
@output_buffer.safe_concat('
');			  	 	  		unless event.is_a?(NarrationEvent)
@output_buffer.safe_concat('			  	 	  		  <span class=\'muted\'>');@output_buffer.append= (event.to_sentence);@output_buffer.safe_concat('</span><br/>
');			  	 	  		end
@output_buffer.safe_concat('			  	 	  		<small class="detail">');@output_buffer.append= (event.detail);@output_buffer.safe_concat('</small>

');@output_buffer.safe_concat('			  	 	  		');if @event_index!=event.order_index;@output_buffer.safe_concat('</div>');end;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		
			  	 	  		<div class="more hide"><hr>
			  	 	  		<input type="hidden" class="event_text" value="');@output_buffer.append= (event.text);@output_buffer.safe_concat('">
			  	 	  		<a class="btn btn-small ');@output_buffer.append= (event_to_js(event));@output_buffer.safe_concat('" href="#" data-name="');@output_buffer.append= (event.get_character_name);@output_buffer.safe_concat('" data-type="');@output_buffer.append= (event.type);@output_buffer.safe_concat('" data-character-id="');@output_buffer.append= (event.character.try(:id));@output_buffer.safe_concat('"><i class="icon-pencil"></i>');@output_buffer.append= (event_to_command(event));@output_buffer.safe_concat('</a><br/>
');			  	 	  		  if event.order_index != 1
@output_buffer.safe_concat('			  	 	  		    <a class="btn btn-small" href="');@output_buffer.append= (moveup_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-up"></i> Move Up</a>
');@output_buffer.safe_concat('			  	 	  		  ');end;if event.order_index != @event_count;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small" href="');@output_buffer.append= (movedown_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-down"></i> Move Down</a>
');			  	 	  		  end
@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small confirmable" href="');@output_buffer.append= (delete_event_path(event));@output_buffer.safe_concat('"><i class="icon-remove"></i> Remove</a>
			  	 	  		</div>
			  	 	  	</td>
			  	 	  	<td width="28">
			  	 	  		<a class="btn btn-mini" href="#" id=\'dropdown\' title="Edit or Delete"><i class="icon-pencil"></i></a>
			  	 	  	</td>
			  	 	  </tr>
');			  	 	end
@output_buffer.safe_concat('			  	    </tbody>
			  	 </table></div> 
			  	 <h3>Add to the Script!</h3>
');			  	character = @project.characters.where(:type=>"Narrator").first
@output_buffer.safe_concat('	  	        <table class="action-items">
			  	 	<tr><td rowspan=3 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
			  	 	<td class="btn btn-small"><a href="#" class="edit-speak" data-type="NarrationEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="">Narration</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterThinksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' thinks</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	        </table>
');	  	          if @scene.love_scene?
	  	            @project.characters.each do |character|
	  	              next if character.is_narrator?
@output_buffer.safe_concat('	  	              <table class="action-items table-bordered">
	  	              	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	              </table>
');	  	            end
	  	          else
				  	 @project.characters.each do |character|
				  	   if @scene.has_character?(character, @event_index)
@output_buffer.safe_concat('				  	      <table class="action-items table-bordered">
					  	 	<tr><td rowspan=3>');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray");@output_buffer.safe_concat('</td>
					  	 	<td><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
					  	 	<tr><td><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' changes pose</a></td></tr>
					  	 	<tr><td>
					  	 		');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('					  	 		  <input type="hidden" name="event[type]" value="CharacterVanishEvent">
					  	 		  <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
					  	 		  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
					  	 		  <a href="#" class="submitable">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' vanishes</a>
					  	 	    </form>
					  	 	</td></tr>
				  	      </table>
');				  	   else
				  	      if !character.is_narrator?
@output_buffer.safe_concat('				  	        <table class="action-items">
						  	 	<tr><td rowspan=1 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
						  	 	<td class="btn btn-small"><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' appears</a></td></tr>
						  	 </table>  
');				  	      end
				  	   end
				  	 end
				   end
@output_buffer.safe_concat('			  	 <table class="action-items">
			  	 	<tr>
			  	 	  <td rowspan=4 class="icon"><div class="btn">');@output_buffer.append= (image_tag bg_file, :class=>"bg", :style=>"height:56px");@output_buffer.safe_concat(' </div></td>
');			  	 	  if @scene.love_scene?
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Love Pose Changes</a></td>
');			  	 	  else
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Background changes</a></td>
');			  	 	  end
@output_buffer.safe_concat('			  	 	</tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-music">Music changes</a></td></tr>
			  	 	<tr><td class="btn btn-small">');@output_buffer.append= (link_to "Preview!", play_scene_path(@project, @project.basename, @scene));@output_buffer.safe_concat('</td></tr>
			  	 	
			  	 </table>
			  </td></tr>
			</table>
			');@output_buffer.append= form_for [@project, @scene] do |f|@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  ');@output_buffer.append= (f.hidden_field :custom_description, :value=>@scene.get_description);@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  <a class="btn btn-small change-scene-name">Change Scene Name</a>
');		    end
@output_buffer.safe_concat('		    ');@output_buffer.append=  form_for([@project, @scene], :method => :delete) do |f|@output_buffer.safe_concat('   
');@output_buffer.safe_concat('			  <a class="btn btn-small delete-scene">Delete Scene</a>
');			end
@output_buffer.safe_concat('		</td>
		<td>
		  <div class="mini-editor">

		  	<!-- Stage Viewer -->
		    <div class="mini-viewer">
		      
			  ');@output_buffer.append= (image_tag bg_file, :class=>"bg");@output_buffer.safe_concat('
');			  if current_event
			  current_event.characters_present.each do |char_present|
@output_buffer.safe_concat('			      ');@output_buffer.append= (image_tag char_present[1], :class=>"characters");@output_buffer.safe_concat('
');			  end
			  end
@output_buffer.safe_concat('			  
			    <!-- edit text -->
			    <div class="glassbox" style="');@output_buffer.append= ("display:none" if !current_event.try(:glassbox?));@output_buffer.safe_concat('">
			    	');@output_buffer.append= (image_tag "glassbox#{'_n' if current_event && current_event.is_a?(NarrationEvent)}.png", :class=>"glass");@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	<div class="speaker">');@output_buffer.append= (current_event.try(:get_character_name));@output_buffer.safe_concat('</div>
			    	<div class="textarea">');@output_buffer.append= (current_event.try(:get_text));@output_buffer.safe_concat('</div>

			    	  ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	  <textarea name="event[text]" value="" class="hide"></textarea>
			    	  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			    	  <input type="hidden" name="event[type]" class="event_type" value="">
			    	  <input type="hidden" name="event_id" class="event_id" value="">
			    	  <input type="hidden" name="event[character_id]" class="character_id" value="">
			    	  <input type="hidden" name="more_text" class="more_text" value="">
			    	  <input type="hidden" name="more_text_type" class="more_text_type" value="">
			    	  <a class="btn btn-mini add-more-text controls hide" href="#"><i class="icon-arrow-down"></i> Add More Text</a>
			    	  <a class="btn btn-mini submitable controls hide" href="#"><i class="icon-check"></i> Finished</a>
			    	  </form>
			    	
			    </div>
			  

		    </div>
		    <div class="overlay-topper hide"><span></span><a class="btn btn-small" href="#"><i class="icon-remove"></i> Close</a></div>

		    <!-- BG Images -->
		    <div class="overlay bg-image" style="display:none">
		    	<ul class="thumbnails">
');		      BackgroundImageEvent.file_list.each do |option|
@output_buffer.safe_concat('		        <li class="span2">
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundImageEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <a class="submitable thumbnail">
		          	');@output_buffer.append= ( image_tag option.url);@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
		          </a>
		          
		        </form>
		        </li>
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Music -->
		    <div class="overlay music" style="display:none">
		    <ul class="graphic">
		    	');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="silence" href="#">(Silence)</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
');		      BackgroundMusicEvent.file_list.each do |option|
@output_buffer.safe_concat('		    
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="" href="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">');@output_buffer.append= (option.title);@output_buffer.safe_concat('</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
		        
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Poses -->
');		      if @scene.love_scene?
		        pose_list = @project.characters.map{|c|c.love_pose_list}
		        pose_list << Hitomi.new.love_pose_list("MF")
		        pose_list.each do |pose|
@output_buffer.safe_concat('		          ');@output_buffer.append= (pose);@output_buffer.safe_concat('
');		        end
		      <%else
			    @project.characters.each do |character|
			    next if character.is_narrator?
@output_buffer.safe_concat('			      <div class="overlay poses-for-');@output_buffer.append= (character.id);@output_buffer.safe_concat('" style="display:none">
			      	<ul class="thumbnails">
');				    character.pose_list.each do |option|
@output_buffer.safe_concat('				      ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('				        <li class="span2">
				        <input type="hidden" name="event[type]" value="CharacterPoseEvent">
			            <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			            <input type="hidden" name="event_id" class="event_id" value="">
				  	     <a class="submitable thumbnail">
				  	    ');@output_buffer.append= (image_tag(option.thumbnail));@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
				  	    </a>
				  	  </form>
				  	  </li>
');				  	end
@output_buffer.safe_concat('				    </ul>
			      </div>
');			    end
			   end
@output_buffer.safe_concat('

		  </div>
		</td>
	</tr>
</table>
 <div id="sm2-container">
  <!-- SM2 flash goes here -->

 </div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `module_eval'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `compile'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:244:in `block in compile!'
<internal:prelude>:10:in `synchronize'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:232:in `compile!'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:144:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:143:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:436:in `_run__2546274305636039190__process_action__559951550473068907__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:612:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/cookies.rb:341:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `_run__2972925480916785336__call__2118854717481468031__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:32:in `call_app'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/tagged_logging.rb:22:in `tagged'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
  Rendered scenes/edit.html.erb within layouts/application (2.7ms)
Completed 500 Internal Server Error in 84ms

ActionView::Template::Error (/Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:208: syntax error, unexpected '<', expecting keyword_end
		      <%else
		       ^
/Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:208: unknown type of %string
		      <%else
		          ^):
    205: 		        pose_list.each do |pose|%>
    206: 		          <%=pose%>
    207: 		        <%end
    208: 		      <%else%>
    209: 			    <%@project.characters.each do |character|%>
    210: 			    <%next if character.is_narrator?%>
    211: 			      <div class="overlay poses-for-<%=character.id%>" style="display:none">
  actionpack (3.2.13) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.13) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.13) lib/action_view/template.rb:244:in `block in compile!'
  <internal:prelude>:10:in `synchronize'
  actionpack (3.2.13) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.13) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.13) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.13) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:18:in `render'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.13) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.13) lib/active_support/callbacks.rb:436:in `_run__2546274305636039190__process_action__559951550473068907__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.13) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:612:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__2972925480916785336__call__2118854717481468031__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.7ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:50:15 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (118.2ms)
Completed 500 Internal Server Error in 125ms

ActionView::Template::Error (No such file or directory - /Users/nicolebeguesse/myvisualnovel/public/Character/#<Hitomi:0x0000010456f388>/Intimate):
    200: 
    201: 		    <!-- Poses -->
    202: 		      <%if @scene.love_scene?%>
    203: 		        <%pose_list = @project.characters.map{|c|c.love_pose_list}
    204: 		        pose_list << Hitomi.new.love_pose_list("MF")%>
    205: 		        <%pose_list.each do |pose|%>
    206: 		          <%=pose%>
  app/models/character.rb:46:in `initialize'
  app/models/character.rb:46:in `new'
  app/models/character.rb:46:in `love_pose_list'
  app/views/scenes/edit.html.erb:203:in `block in _app_views_scenes_edit_html_erb__3290528582916167801_2181340500'
  app/views/scenes/edit.html.erb:203:in `_app_views_scenes_edit_html_erb__3290528582916167801_2181340500'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.1ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:51:04 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (114.8ms)
Completed 500 Internal Server Error in 189ms

ActionView::Template::Error (undefined method `humanize' for #<Hitomi:0x00000103c54000>):
    200: 
    201: 		    <!-- Poses -->
    202: 		      <%if @scene.love_scene?%>
    203: 		        <%pose_list = @project.characters.map{|c|c.love_pose_list}
    204: 		        pose_list << Hitomi.new.love_pose_list("MF")%>
    205: 		        <%pose_list.each do |pose|%>
    206: 		          <%=pose%>
  app/models/character.rb:53:in `block in love_pose_list'
  app/models/character.rb:46:in `each'
  app/models/character.rb:46:in `love_pose_list'
  app/views/scenes/edit.html.erb:203:in `block in _app_views_scenes_edit_html_erb__3290528582916167801_2181340500'
  app/views/scenes/edit.html.erb:203:in `_app_views_scenes_edit_html_erb__3290528582916167801_2181340500'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.1ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:52:06 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (77.4ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:52:06.683223', "perishable_token" = '4MkPSdUi5VnkWTOHsD', "updated_at" = '2013-05-23 04:52:06.685136' WHERE "users"."id" = 3
  [1m[36m (42.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 282ms (Views: 165.2ms | ActiveRecord: 46.5ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:52:38 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "18"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=18 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (27.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 04:52:38.741145', "perishable_token" = 'rN8NtM5ZzHLwkRzgTMg0', "updated_at" = '2013-05-23 04:52:38.741824' WHERE "users"."id" = 3[0m
  [1m[35m (41.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 86ms (Views: 39.5ms | ActiveRecord: 43.6ms)


Started GET "/projects/8/scenes/18/edit" for 127.0.0.1 at 2013-05-23 00:53:54 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"18"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "18"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=18 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (26.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 04:53:54.195645', "perishable_token" = 'yR23fjJruln0bYMzFQ9', "updated_at" = '2013-05-23 04:53:54.196312' WHERE "users"."id" = 3
  [1m[36m (46.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 90ms (Views: 37.3ms | ActiveRecord: 49.3ms)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateProjects (20130517043538)
Migrating to CreateCharacters (20130517060402)
Migrating to AddDescriptionToCharacters (20130517141850)
Migrating to CreateScenes (20130517151745)
Migrating to CreateEvents (20130517152030)
Migrating to ChangeEvents (20130517161208)
Migrating to AddCharacterTypeToEvent (20130518205250)
Migrating to AddTextToEvent (20130519045318)
Migrating to AddBasenameToProject (20130520193719)
Migrating to CreateUsers (20130521013447)
Migrating to AddCharactersPresentToEvent (20130521065105)
Migrating to AddLoveSceneToScenes (20130523040642)
Migrating to AddGenderToCharacters (20130523050725)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "characters" ADD "is_female" boolean DEFAULT 'false'
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130523050725')[0m
  [1m[35m (41.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml


Started GET "/" for 127.0.0.1 at 2013-05-23 11:36:49 -0400
Processing by MainController#index as HTML
  Rendered main/index.html.erb within layouts/application (3.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '5e2291803b53310afec3d6d67fdc14fb'[0m
Completed 200 OK in 155ms (Views: 151.7ms | ActiveRecord: 2.7ms)


Started GET "/login" for 127.0.0.1 at 2013-05-23 11:37:19 -0400
Processing by UserSessionsController#new as HTML
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '5e2291803b53310afec3d6d67fdc14fb'
  Rendered user_sessions/new.html.erb within layouts/application (4.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '5e2291803b53310afec3d6d67fdc14fb'[0m
Completed 200 OK in 14ms (Views: 11.8ms | ActiveRecord: 0.2ms)


Started POST "/user_sessions" for 127.0.0.1 at 2013-05-23 11:37:29 -0400
Processing by UserSessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "user_session"=>{"email"=>"nicole@highlinesale.com", "password"=>"[FILTERED]", "remember_me"=>"on"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE (LOWER("users".email) = 'nicole@highlinesale.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "login_count" = 10, "last_login_at" = '2013-05-22 19:34:11.614759', "current_login_at" = '2013-05-23 15:37:29.481020', "last_request_at" = '2013-05-23 15:37:29.481376', "perishable_token" = '9JvfDaYUNe4cTzHcO', "updated_at" = '2013-05-23 15:37:29.483479' WHERE "users"."id" = 3
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
IN CREATE SESSION
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'nicole@highlinesale.com' LIMIT 1
IN TEMP SESSION COPY TO
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '5e2291803b53310afec3d6d67fdc14fb'[0m
Redirected to http://localhost:3000/projects
Completed 302 Found in 195ms (ActiveRecord: 4.7ms)


Started GET "/projects" for 127.0.0.1 at 2013-05-23 11:37:29 -0400
Processing by ProjectsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:37:29.513369', "perishable_token" = '8C3QQMGoOzmZKkdAa1', "updated_at" = '2013-05-23 15:37:29.514237' WHERE "users"."id" = 3
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (37.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 9[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=9 ) AND (order_index = 0) LIMIT 1
  Rendered scenes/_thumbnail.html.erb (0.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 10[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=10 ) AND (order_index = 0) LIMIT 1
  Rendered scenes/_thumbnail.html.erb (0.3ms)
  Rendered projects/index.html.erb within layouts/application (132.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 152ms (Views: 136.8ms | ActiveRecord: 8.4ms)


Started GET "/projects/8" for 127.0.0.1 at 2013-05-23 11:37:37 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[35mProject Load (0.3ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (149.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE (project_id=8 ) AND (order_index = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (3.4ms)
  Rendered projects/show.html.erb within layouts/application (159.4ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:37:37.577273', "perishable_token" = 'iW99GFKrLVrWZUIDSo5n', "updated_at" = '2013-05-23 15:37:37.577915' WHERE "users"."id" = 3
  [1m[36m (3.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 176ms (Views: 168.0ms | ActiveRecord: 5.9ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 11:37:53 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/_thumbnail.html.erb (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/index.html.erb within layouts/application (29.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 15:37:53.703040', "perishable_token" = 'a8tFGt5bDTUBEpmkGqFQ', "updated_at" = '2013-05-23 15:37:53.746543' WHERE "users"."id" = 3[0m
  [1m[35m (45.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 134ms (Views: 83.5ms | ActiveRecord: 48.4ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 11:38:05 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[35mScene Load (0.4ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "16"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
ERROR: compiling _app_views_scenes_edit_html_erb__1588704877332344245_2188568800 RAISED /Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:206: syntax error, unexpected tIDENTIFIER, expecting keyword_end
Function body:           def _app_views_scenes_edit_html_erb__1588704877332344245_2188568800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "scenes/edit";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;
  current_event = Event.for_scene(@scene).at(@event_index).first
  bg_file =  @scene.image_at(@event_index).get_file

@output_buffer.safe_concat('<table class="scene-editor">
	<tr>
		<td>
			
			  <p><b>Scene ');@output_buffer.append= (@scene.order_index);@output_buffer.safe_concat(':</b> ');@output_buffer.append= (@scene.get_description);@output_buffer.safe_concat('</p>
			<table class="table table-condensed">
			  <tr><td>
			  	 <h2>Script</h2>
			  	 <div class="script-holder">
			  	 <table class="script table-bordered table-hover table-condensed">
			  	 	<tbody>
');			  	 	if Event.for_scene(@scene).empty?
@output_buffer.safe_concat('			  	 	  <tr><td>Nothing in the script yet.</td></tr>
');			  	 	end
			  	 	Event.for_scene(@scene).ordered.each do |event|
@output_buffer.safe_concat('			  	 	  <tr data-order-id="');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('" data-id="');@output_buffer.append= (event.id);@output_buffer.safe_concat('" id="row');@output_buffer.append= (event.id);@output_buffer.safe_concat('" class="');@output_buffer.append= ("selected" if @event_index==event.order_index);@output_buffer.safe_concat('">
			  	 	  	<td>');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('</td>
			  	 	  	<td>
');			  	 	  		if @event_index!=event.order_index
@output_buffer.safe_concat('			  	 	  		  <div class="jump-to tippable" title="Jump Here" data-url="');@output_buffer.append= (edit_project_scene_url(@project, @scene, :event_index=>event.order_index));@output_buffer.safe_concat('">
');			  	 	  		end
@output_buffer.safe_concat('
');			  	 	  		unless event.is_a?(NarrationEvent)
@output_buffer.safe_concat('			  	 	  		  <span class=\'muted\'>');@output_buffer.append= (event.to_sentence);@output_buffer.safe_concat('</span><br/>
');			  	 	  		end
@output_buffer.safe_concat('			  	 	  		<small class="detail">');@output_buffer.append= (event.detail);@output_buffer.safe_concat('</small>

');@output_buffer.safe_concat('			  	 	  		');if @event_index!=event.order_index;@output_buffer.safe_concat('</div>');end;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		
			  	 	  		<div class="more hide"><hr>
			  	 	  		<input type="hidden" class="event_text" value="');@output_buffer.append= (event.text);@output_buffer.safe_concat('">
			  	 	  		<a class="btn btn-small ');@output_buffer.append= (event_to_js(event));@output_buffer.safe_concat('" href="#" data-name="');@output_buffer.append= (event.get_character_name);@output_buffer.safe_concat('" data-type="');@output_buffer.append= (event.type);@output_buffer.safe_concat('" data-character-id="');@output_buffer.append= (event.character.try(:id));@output_buffer.safe_concat('"><i class="icon-pencil"></i>');@output_buffer.append= (event_to_command(event));@output_buffer.safe_concat('</a><br/>
');			  	 	  		  if event.order_index != 1
@output_buffer.safe_concat('			  	 	  		    <a class="btn btn-small" href="');@output_buffer.append= (moveup_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-up"></i> Move Up</a>
');@output_buffer.safe_concat('			  	 	  		  ');end;if event.order_index != @event_count;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small" href="');@output_buffer.append= (movedown_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-down"></i> Move Down</a>
');			  	 	  		  end
@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small confirmable" href="');@output_buffer.append= (delete_event_path(event));@output_buffer.safe_concat('"><i class="icon-remove"></i> Remove</a>
			  	 	  		</div>
			  	 	  	</td>
			  	 	  	<td width="28">
			  	 	  		<a class="btn btn-mini" href="#" id=\'dropdown\' title="Edit or Delete"><i class="icon-pencil"></i></a>
			  	 	  	</td>
			  	 	  </tr>
');			  	 	end
@output_buffer.safe_concat('			  	    </tbody>
			  	 </table></div> 
			  	 <h3>Add to the Script!</h3>
');			  	character = @project.characters.where(:type=>"Narrator").first
@output_buffer.safe_concat('	  	        <table class="action-items">
			  	 	<tr><td rowspan=3 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
			  	 	<td class="btn btn-small"><a href="#" class="edit-speak" data-type="NarrationEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="">Narration</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterThinksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' thinks</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	        </table>
');	  	          if @scene.love_scene?
	  	            @project.characters.each do |character|
	  	              next if character.is_narrator?
@output_buffer.safe_concat('	  	              <table class="action-items table-bordered">
	  	              	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	              </table>
');	  	            end
	  	          else
				  	 @project.characters.each do |character|
				  	   if @scene.has_character?(character, @event_index)
@output_buffer.safe_concat('				  	      <table class="action-items table-bordered">
					  	 	<tr><td rowspan=3>');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray");@output_buffer.safe_concat('</td>
					  	 	<td><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
					  	 	<tr><td><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' changes pose</a></td></tr>
					  	 	<tr><td>
					  	 		');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('					  	 		  <input type="hidden" name="event[type]" value="CharacterVanishEvent">
					  	 		  <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
					  	 		  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
					  	 		  <a href="#" class="submitable">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' vanishes</a>
					  	 	    </form>
					  	 	</td></tr>
				  	      </table>
');				  	   else
				  	      if !character.is_narrator?
@output_buffer.safe_concat('				  	        <table class="action-items">
						  	 	<tr><td rowspan=1 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
						  	 	<td class="btn btn-small"><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' appears</a></td></tr>
						  	 </table>  
');				  	      end
				  	   end
				  	 end
				   end
@output_buffer.safe_concat('			  	 <table class="action-items">
			  	 	<tr>
			  	 	  <td rowspan=4 class="icon"><div class="btn">');@output_buffer.append= (image_tag bg_file, :class=>"bg", :style=>"height:56px");@output_buffer.safe_concat(' </div></td>
');			  	 	  if @scene.love_scene?
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Love Pose Changes</a></td>
');			  	 	  else
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Background changes</a></td>
');			  	 	  end
@output_buffer.safe_concat('			  	 	</tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-music">Music changes</a></td></tr>
			  	 	<tr><td class="btn btn-small">');@output_buffer.append= (link_to "Preview!", play_scene_path(@project, @project.basename, @scene));@output_buffer.safe_concat('</td></tr>
			  	 	
			  	 </table>
			  </td></tr>
			</table>
			');@output_buffer.append= form_for [@project, @scene] do |f|@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  ');@output_buffer.append= (f.hidden_field :custom_description, :value=>@scene.get_description);@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  <a class="btn btn-small change-scene-name">Change Scene Name</a>
');		    end
@output_buffer.safe_concat('		    ');@output_buffer.append=  form_for([@project, @scene], :method => :delete) do |f|@output_buffer.safe_concat('   
');@output_buffer.safe_concat('			  <a class="btn btn-small delete-scene">Delete Scene</a>
');			end
@output_buffer.safe_concat('		</td>
		<td>
		  <div class="mini-editor">

		  	<!-- Stage Viewer -->
		    <div class="mini-viewer">
		      
			  ');@output_buffer.append= (image_tag bg_file, :class=>"bg");@output_buffer.safe_concat('
');			  if current_event
			  current_event.characters_present.each do |char_present|
@output_buffer.safe_concat('			      ');@output_buffer.append= (image_tag char_present[1], :class=>"characters");@output_buffer.safe_concat('
');			  end
			  end
@output_buffer.safe_concat('			  
			    <!-- edit text -->
			    <div class="glassbox" style="');@output_buffer.append= ("display:none" if !current_event.try(:glassbox?));@output_buffer.safe_concat('">
			    	');@output_buffer.append= (image_tag "glassbox#{'_n' if current_event && current_event.is_a?(NarrationEvent)}.png", :class=>"glass");@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	<div class="speaker">');@output_buffer.append= (current_event.try(:get_character_name));@output_buffer.safe_concat('</div>
			    	<div class="textarea">');@output_buffer.append= (current_event.try(:get_text));@output_buffer.safe_concat('</div>

			    	  ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	  <textarea name="event[text]" value="" class="hide"></textarea>
			    	  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			    	  <input type="hidden" name="event[type]" class="event_type" value="">
			    	  <input type="hidden" name="event_id" class="event_id" value="">
			    	  <input type="hidden" name="event[character_id]" class="character_id" value="">
			    	  <input type="hidden" name="more_text" class="more_text" value="">
			    	  <input type="hidden" name="more_text_type" class="more_text_type" value="">
			    	  <a class="btn btn-mini add-more-text controls hide" href="#"><i class="icon-arrow-down"></i> Add More Text</a>
			    	  <a class="btn btn-mini submitable controls hide" href="#"><i class="icon-check"></i> Finished</a>
			    	  </form>
			    	
			    </div>
			  

		    </div>
		    <div class="overlay-topper hide"><span></span><a class="btn btn-small" href="#"><i class="icon-remove"></i> Close</a></div>

		    <!-- BG Images -->
		    <div class="overlay bg-image" style="display:none">
		    	<ul class="thumbnails">
');		      BackgroundImageEvent.file_list.each do |option|
@output_buffer.safe_concat('		        <li class="span2">
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundImageEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <a class="submitable thumbnail">
		          	');@output_buffer.append= ( image_tag option.url);@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
		          </a>
		          
		        </form>
		        </li>
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Music -->
		    <div class="overlay music" style="display:none">
		    <ul class="graphic">
		    	');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="silence" href="#">(Silence)</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
');		      BackgroundMusicEvent.file_list.each do |option|
@output_buffer.safe_concat('		    
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="" href="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">');@output_buffer.append= (option.title);@output_buffer.safe_concat('</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
		        
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Poses -->
');		      if @scene.love_scene?
		      	sexes = @project.characters.pluck(:is_female).map{|i|i ? "F" : "M"}

		        pose_list << @project.characters.map{|c|c.love_pose_list(sexes)}
		        pose_list << Generic.new.love_pose_list sexes
		        
		        pose_list.flatten.each do |pose|
@output_buffer.safe_concat('		          ');@output_buffer.append= (pose);@output_buffer.safe_concat('
');		        end
		      else
			    @project.characters.each do |character|
			    next if character.is_narrator?
@output_buffer.safe_concat('			      <div class="overlay poses-for-');@output_buffer.append= (character.id);@output_buffer.safe_concat('" style="display:none">
			      	<ul class="thumbnails">
');				    character.pose_list.each do |option|
@output_buffer.safe_concat('				      ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('				        <li class="span2">
				        <input type="hidden" name="event[type]" value="CharacterPoseEvent">
			            <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			            <input type="hidden" name="event_id" class="event_id" value="">
				  	     <a class="submitable thumbnail">
				  	    ');@output_buffer.append= (image_tag(option.thumbnail));@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
				  	    </a>
				  	  </form>
				  	  </li>
');				  	end
@output_buffer.safe_concat('				    </ul>
			      </div>
');			    end
			   end
@output_buffer.safe_concat('

		  </div>
		</td>
	</tr>
</table>
 <div id="sm2-container">
  <!-- SM2 flash goes here -->

 </div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `module_eval'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `compile'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:244:in `block in compile!'
<internal:prelude>:10:in `synchronize'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:232:in `compile!'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:144:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:143:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:436:in `_run__3039345078428003108__process_action__3298617741879299327__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:612:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/cookies.rb:341:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `_run__774333008612005471__call__37906206802708755__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:32:in `call_app'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/tagged_logging.rb:22:in `tagged'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
  Rendered scenes/edit.html.erb within layouts/application (7.6ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (/Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:206: syntax error, unexpected tIDENTIFIER, expecting keyword_end):
    203: 		      	sexes = @project.characters.pluck(:is_female).map{|i|i ? "F" : "M"}
    204: 
    205: 		        pose_list << @project.characters.map{|c|c.love_pose_list(sexes)}
    206: 		        pose_list << Generic.new.love_pose_list sexes
    207: 		        
    208: 		        pose_list.flatten.each do |pose|%>
    209: 		          <%=pose%>
  actionpack (3.2.13) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.13) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.13) lib/action_view/template.rb:244:in `block in compile!'
  <internal:prelude>:10:in `synchronize'
  actionpack (3.2.13) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.13) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.13) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.13) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:18:in `render'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.13) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.13) lib/active_support/callbacks.rb:436:in `_run__3039345078428003108__process_action__3298617741879299327__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.13) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:612:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__774333008612005471__call__37906206802708755__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (9.5ms)


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 11:38:52 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "16"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=16 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (112.1ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:38:52.553590', "perishable_token" = 'lqMQnNn9FyBohobMXMH', "updated_at" = '2013-05-23 15:38:52.554238' WHERE "users"."id" = 3
  [1m[36m (42.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 173ms (Views: 124.6ms | ActiveRecord: 45.4ms)
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateProjects (20130517043538)
Migrating to CreateCharacters (20130517060402)
Migrating to AddDescriptionToCharacters (20130517141850)
Migrating to CreateScenes (20130517151745)
Migrating to CreateEvents (20130517152030)
Migrating to ChangeEvents (20130517161208)
Migrating to AddCharacterTypeToEvent (20130518205250)
Migrating to AddTextToEvent (20130519045318)
Migrating to AddBasenameToProject (20130520193719)
Migrating to CreateUsers (20130521013447)
Migrating to AddCharactersPresentToEvent (20130521065105)
Migrating to AddLoveSceneToScenes (20130523040642)
Migrating to AddGenderToCharacters (20130523050726)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "characters" ADD "sex" varchar(1) DEFAULT 'M'
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130523050726')[0m
  [1m[35m (42.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml


Started GET "/projects/8/scenes/16/edit" for 127.0.0.1 at 2013-05-23 11:42:56 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"16"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "16"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=16 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 16 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 5) LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (180.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 15:42:56.891589', "perishable_token" = 'gDuSPyTUwYhvi3hCUxP', "updated_at" = '2013-05-23 15:42:56.892978' WHERE "users"."id" = 3[0m
  [1m[35m (40.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 475ms (Views: 307.5ms | ActiveRecord: 47.8ms)


Started GET "/projects/8/scenes" for 127.0.0.1 at 2013-05-23 11:45:10 -0400
Processing by ScenesController#index as HTML
  Parameters: {"project_id"=>"8"}
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."project_id" = 8[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (5.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 16
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=16 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  Rendered scenes/_thumbnail.html.erb (2.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/_thumbnail.html.erb (2.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 18
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=18 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  Rendered scenes/index.html.erb within layouts/application (32.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:45:10.717865', "perishable_token" = 'AL7ZC5qTaL85sXfbKeP', "updated_at" = '2013-05-23 15:45:10.718512' WHERE "users"."id" = 3
  [1m[36m (42.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
Completed 200 OK in 88ms (Views: 41.4ms | ActiveRecord: 44.7ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:46:12 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
ERROR: compiling _app_views_scenes_edit_html_erb__4331478716365463348_2188677520 RAISED /Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:206: syntax error, unexpected tIDENTIFIER, expecting keyword_end
Function body:           def _app_views_scenes_edit_html_erb__4331478716365463348_2188677520(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "scenes/edit";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;
  current_event = Event.for_scene(@scene).at(@event_index).first
  bg_file =  @scene.image_at(@event_index).get_file

@output_buffer.safe_concat('<table class="scene-editor">
	<tr>
		<td>
			
			  <p><b>Scene ');@output_buffer.append= (@scene.order_index);@output_buffer.safe_concat(':</b> ');@output_buffer.append= (@scene.get_description);@output_buffer.safe_concat('</p>
			<table class="table table-condensed">
			  <tr><td>
			  	 <h2>Script</h2>
			  	 <div class="script-holder">
			  	 <table class="script table-bordered table-hover table-condensed">
			  	 	<tbody>
');			  	 	if Event.for_scene(@scene).empty?
@output_buffer.safe_concat('			  	 	  <tr><td>Nothing in the script yet.</td></tr>
');			  	 	end
			  	 	Event.for_scene(@scene).ordered.each do |event|
@output_buffer.safe_concat('			  	 	  <tr data-order-id="');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('" data-id="');@output_buffer.append= (event.id);@output_buffer.safe_concat('" id="row');@output_buffer.append= (event.id);@output_buffer.safe_concat('" class="');@output_buffer.append= ("selected" if @event_index==event.order_index);@output_buffer.safe_concat('">
			  	 	  	<td>');@output_buffer.append= (event.order_index);@output_buffer.safe_concat('</td>
			  	 	  	<td>
');			  	 	  		if @event_index!=event.order_index
@output_buffer.safe_concat('			  	 	  		  <div class="jump-to tippable" title="Jump Here" data-url="');@output_buffer.append= (edit_project_scene_url(@project, @scene, :event_index=>event.order_index));@output_buffer.safe_concat('">
');			  	 	  		end
@output_buffer.safe_concat('
');			  	 	  		unless event.is_a?(NarrationEvent)
@output_buffer.safe_concat('			  	 	  		  <span class=\'muted\'>');@output_buffer.append= (event.to_sentence);@output_buffer.safe_concat('</span><br/>
');			  	 	  		end
@output_buffer.safe_concat('			  	 	  		<small class="detail">');@output_buffer.append= (event.detail);@output_buffer.safe_concat('</small>

');@output_buffer.safe_concat('			  	 	  		');if @event_index!=event.order_index;@output_buffer.safe_concat('</div>');end;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		
			  	 	  		<div class="more hide"><hr>
			  	 	  		<input type="hidden" class="event_text" value="');@output_buffer.append= (event.text);@output_buffer.safe_concat('">
			  	 	  		<a class="btn btn-small ');@output_buffer.append= (event_to_js(event));@output_buffer.safe_concat('" href="#" data-name="');@output_buffer.append= (event.get_character_name);@output_buffer.safe_concat('" data-type="');@output_buffer.append= (event.type);@output_buffer.safe_concat('" data-character-id="');@output_buffer.append= (event.character.try(:id));@output_buffer.safe_concat('"><i class="icon-pencil"></i>');@output_buffer.append= (event_to_command(event));@output_buffer.safe_concat('</a><br/>
');			  	 	  		  if event.order_index != 1
@output_buffer.safe_concat('			  	 	  		    <a class="btn btn-small" href="');@output_buffer.append= (moveup_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-up"></i> Move Up</a>
');@output_buffer.safe_concat('			  	 	  		  ');end;if event.order_index != @event_count;@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small" href="');@output_buffer.append= (movedown_event_path(event));@output_buffer.safe_concat('"><i class="icon-arrow-down"></i> Move Down</a>
');			  	 	  		  end
@output_buffer.safe_concat('			  	 	  		  <a class="btn btn-small confirmable" href="');@output_buffer.append= (delete_event_path(event));@output_buffer.safe_concat('"><i class="icon-remove"></i> Remove</a>
			  	 	  		</div>
			  	 	  	</td>
			  	 	  	<td width="28">
			  	 	  		<a class="btn btn-mini" href="#" id=\'dropdown\' title="Edit or Delete"><i class="icon-pencil"></i></a>
			  	 	  	</td>
			  	 	  </tr>
');			  	 	end
@output_buffer.safe_concat('			  	    </tbody>
			  	 </table></div> 
			  	 <h3>Add to the Script!</h3>
');			  	character = @project.characters.where(:type=>"Narrator").first
@output_buffer.safe_concat('	  	        <table class="action-items">
			  	 	<tr><td rowspan=3 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
			  	 	<td class="btn btn-small"><a href="#" class="edit-speak" data-type="NarrationEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="">Narration</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterThinksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' thinks</td></tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	        </table>
');	  	          if @scene.love_scene?
	  	            @project.characters.each do |character|
	  	              next if character.is_narrator?
@output_buffer.safe_concat('	  	              <table class="action-items table-bordered">
	  	              	<tr><td class="btn btn-small"><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
	  	              </table>
');	  	            end
	  	          else
				  	 @project.characters.each do |character|
				  	   if @scene.has_character?(character, @event_index)
@output_buffer.safe_concat('				  	      <table class="action-items table-bordered">
					  	 	<tr><td rowspan=3>');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray");@output_buffer.safe_concat('</td>
					  	 	<td><a href="#" class="edit-speak" data-type="CharacterSpeaksEvent" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('" data-name="');@output_buffer.append= (character.name);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' speaks</a></td></tr>
					  	 	<tr><td><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' changes pose</a></td></tr>
					  	 	<tr><td>
					  	 		');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('					  	 		  <input type="hidden" name="event[type]" value="CharacterVanishEvent">
					  	 		  <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
					  	 		  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
					  	 		  <a href="#" class="submitable">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' vanishes</a>
					  	 	    </form>
					  	 	</td></tr>
				  	      </table>
');				  	   else
				  	      if !character.is_narrator?
@output_buffer.safe_concat('				  	        <table class="action-items">
						  	 	<tr><td rowspan=1 class="icon"><span class="btn">');@output_buffer.append= (image_tag "spacer.gif", :style=>"background-color:lightgray; height:56px");@output_buffer.safe_concat('</span></td>
						  	 	<td class="btn btn-small"><a href="#" class="edit-pose" data-character-id="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">');@output_buffer.append= (character.name);@output_buffer.safe_concat(' appears</a></td></tr>
						  	 </table>  
');				  	      end
				  	   end
				  	 end
				   end
@output_buffer.safe_concat('			  	 <table class="action-items">
			  	 	<tr>
			  	 	  <td rowspan=4 class="icon"><div class="btn">');@output_buffer.append= (image_tag bg_file, :class=>"bg", :style=>"height:56px");@output_buffer.safe_concat(' </div></td>
');			  	 	  if @scene.love_scene?
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Love Pose Changes</a></td>
');			  	 	  else
@output_buffer.safe_concat('			  	 	    <td class="btn btn-small"><a href="#" class="edit-bg-image">Background changes</a></td>
');			  	 	  end
@output_buffer.safe_concat('			  	 	</tr>
			  	 	<tr><td class="btn btn-small"><a href="#" class="edit-music">Music changes</a></td></tr>
			  	 	<tr><td class="btn btn-small">');@output_buffer.append= (link_to "Preview!", play_scene_path(@project, @project.basename, @scene));@output_buffer.safe_concat('</td></tr>
			  	 	
			  	 </table>
			  </td></tr>
			</table>
			');@output_buffer.append= form_for [@project, @scene] do |f|@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  ');@output_buffer.append= (f.hidden_field :custom_description, :value=>@scene.get_description);@output_buffer.safe_concat('
');@output_buffer.safe_concat('			  <a class="btn btn-small change-scene-name">Change Scene Name</a>
');		    end
@output_buffer.safe_concat('		    ');@output_buffer.append=  form_for([@project, @scene], :method => :delete) do |f|@output_buffer.safe_concat('   
');@output_buffer.safe_concat('			  <a class="btn btn-small delete-scene">Delete Scene</a>
');			end
@output_buffer.safe_concat('		</td>
		<td>
		  <div class="mini-editor">

		  	<!-- Stage Viewer -->
		    <div class="mini-viewer">
		      
			  ');@output_buffer.append= (image_tag bg_file, :class=>"bg");@output_buffer.safe_concat('
');			  if current_event
			  current_event.characters_present.each do |char_present|
@output_buffer.safe_concat('			      ');@output_buffer.append= (image_tag char_present[1], :class=>"characters");@output_buffer.safe_concat('
');			  end
			  end
@output_buffer.safe_concat('			  
			    <!-- edit text -->
			    <div class="glassbox" style="');@output_buffer.append= ("display:none" if !current_event.try(:glassbox?));@output_buffer.safe_concat('">
			    	');@output_buffer.append= (image_tag "glassbox#{'_n' if current_event && current_event.is_a?(NarrationEvent)}.png", :class=>"glass");@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	<div class="speaker">');@output_buffer.append= (current_event.try(:get_character_name));@output_buffer.safe_concat('</div>
			    	<div class="textarea">');@output_buffer.append= (current_event.try(:get_text));@output_buffer.safe_concat('</div>

			    	  ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('			    	  <textarea name="event[text]" value="" class="hide"></textarea>
			    	  <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			    	  <input type="hidden" name="event[type]" class="event_type" value="">
			    	  <input type="hidden" name="event_id" class="event_id" value="">
			    	  <input type="hidden" name="event[character_id]" class="character_id" value="">
			    	  <input type="hidden" name="more_text" class="more_text" value="">
			    	  <input type="hidden" name="more_text_type" class="more_text_type" value="">
			    	  <a class="btn btn-mini add-more-text controls hide" href="#"><i class="icon-arrow-down"></i> Add More Text</a>
			    	  <a class="btn btn-mini submitable controls hide" href="#"><i class="icon-check"></i> Finished</a>
			    	  </form>
			    	
			    </div>
			  

		    </div>
		    <div class="overlay-topper hide"><span></span><a class="btn btn-small" href="#"><i class="icon-remove"></i> Close</a></div>

		    <!-- BG Images -->
		    <div class="overlay bg-image" style="display:none">
		    	<ul class="thumbnails">
');		      BackgroundImageEvent.file_list.each do |option|
@output_buffer.safe_concat('		        <li class="span2">
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundImageEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <a class="submitable thumbnail">
		          	');@output_buffer.append= ( image_tag option.url);@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
		          </a>
		          
		        </form>
		        </li>
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Music -->
		    <div class="overlay music" style="display:none">
		    <ul class="graphic">
		    	');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="silence" href="#">(Silence)</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
');		      BackgroundMusicEvent.file_list.each do |option|
@output_buffer.safe_concat('		    
		        ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('		          <input type="hidden" name="event[type]" value="BackgroundMusicEvent">
		          <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
		          <input type="hidden" name="event_id" class="event_id" value="">
		          <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
		          <li class="">
		          	<a class="" href="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">');@output_buffer.append= (option.title);@output_buffer.safe_concat('</a><button class="submitable btn btn-small" href="#">Choose</button>
		          </li>
		        </form>
		        
');		      end
@output_buffer.safe_concat('		      </ul>
		    </div>

		    <!-- Poses -->
');		      if @scene.love_scene?
		      	sexes = @project.characters.pluck(:sex)

		        pose_list << @project.characters.map{|c|c.love_pose_list(sexes)}
		        pose_list << Male.new.love_pose_list sexes
		        
		        pose_list.flatten.each do |pose|
@output_buffer.safe_concat('		          ');@output_buffer.append= (pose);@output_buffer.safe_concat('
');		        end
		      else
			    @project.characters.each do |character|
			    next if character.is_narrator?
@output_buffer.safe_concat('			      <div class="overlay poses-for-');@output_buffer.append= (character.id);@output_buffer.safe_concat('" style="display:none">
			      	<ul class="thumbnails">
');				    character.pose_list.each do |option|
@output_buffer.safe_concat('				      ');@output_buffer.append= (form_tag update_event_project_scene_path(@project, @scene));@output_buffer.safe_concat('
');@output_buffer.safe_concat('				        <li class="span2">
				        <input type="hidden" name="event[type]" value="CharacterPoseEvent">
			            <input type="hidden" name="event[filename]" value="');@output_buffer.append= (option.url);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[character_id]" value="');@output_buffer.append= (character.id);@output_buffer.safe_concat('">
			            <input type="hidden" name="event[order_index]" class="event_order" value="');@output_buffer.append= (@event_index);@output_buffer.safe_concat('">
			            <input type="hidden" name="event_id" class="event_id" value="">
				  	     <a class="submitable thumbnail">
				  	    ');@output_buffer.append= (image_tag(option.thumbnail));@output_buffer.safe_concat('<p>');@output_buffer.append= (option.title);@output_buffer.safe_concat('</p>
				  	    </a>
				  	  </form>
				  	  </li>
');				  	end
@output_buffer.safe_concat('				    </ul>
			      </div>
');			    end
			   end
@output_buffer.safe_concat('

		  </div>
		</td>
	</tr>
</table>
 <div id="sm2-container">
  <!-- SM2 flash goes here -->

 </div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `module_eval'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:297:in `compile'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:244:in `block in compile!'
<internal:prelude>:10:in `synchronize'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:232:in `compile!'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:144:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/template.rb:143:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:436:in `_run__1113731765459484591__process_action__2662909057483250102__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:612:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/cookies.rb:341:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `_run__1011702608781642082__call__758079567646534290__callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:32:in `call_app'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `block in call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/tagged_logging.rb:22:in `tagged'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.13/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
  Rendered scenes/edit.html.erb within layouts/application (51.0ms)
Completed 500 Internal Server Error in 56ms

ActionView::Template::Error (/Users/nicolebeguesse/myvisualnovel/app/views/scenes/edit.html.erb:206: syntax error, unexpected tIDENTIFIER, expecting keyword_end):
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 
    205: 		        pose_list << @project.characters.map{|c|c.love_pose_list(sexes)}
    206: 		        pose_list << Male.new.love_pose_list sexes
    207: 		        
    208: 		        pose_list.flatten.each do |pose|%>
    209: 		          <%=pose%>
  actionpack (3.2.13) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.13) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.13) lib/action_view/template.rb:244:in `block in compile!'
  <internal:prelude>:10:in `synchronize'
  actionpack (3.2.13) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.13) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.13) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.13) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/template_renderer.rb:18:in `render'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.13) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.13) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.13) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
  activesupport (3.2.13) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.13) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.13) lib/active_support/callbacks.rb:436:in `_run__1113731765459484591__process_action__2662909057483250102__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.13) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:612:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__1011702608781642082__call__758079567646534290__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/nicolebeguesse/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.3ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:46:26 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (32.8ms)
Completed 500 Internal Server Error in 39ms

ActionView::Template::Error (undefined local variable or method `pose_list' for #<#<Class:0x00000100c3a018>:0x00000104df2460>):
    202: 		      <%if @scene.love_scene?
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 
    205: 		        pose_list << @project.characters.map{|c|c.love_pose_list(sexes)}
    206: 		        pose_list << Male.new.love_pose_list(sexes)
    207: 		        
    208: 		        pose_list.flatten.each do |pose|%>
  app/views/scenes/edit.html.erb:205:in `_app_views_scenes_edit_html_erb__4331478716365463348_2188346640'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.6ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:47:04 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (26.9ms)
Completed 500 Internal Server Error in 32ms

ActionView::Template::Error (Expected /Users/nicolebeguesse/myvisualnovel/app/models/characters/male.rb to define Male):
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 
    205: 		        pose_list = @project.characters.map{|c|c.love_pose_list(sexes)}
    206: 		        pose_list << Male.new.love_pose_list(sexes)
    207: 		        
    208: 		        pose_list.flatten.each do |pose|%>
    209: 		          <%=pose%>
  app/views/scenes/edit.html.erb:206:in `_app_views_scenes_edit_html_erb__4331478716365463348_2169064540'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.5ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:47:19 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (127.9ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:47:19.632806', "perishable_token" = 'hjskhXrgQ6Ato4mxAAyN', "updated_at" = '2013-05-23 15:47:19.634133' WHERE "users"."id" = 3
  [1m[36m (42.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 287ms (Views: 210.7ms | ActiveRecord: 46.8ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:48:14 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (119.7ms)
Completed 500 Internal Server Error in 194ms

ActionView::Template::Error (No such file or directory - /Users/nicolebeguesse/myvisualnovel/public/Character/Hitomi/M/Intimate):
    202: 		      <%if @scene.love_scene?
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 
    205: 		        pose_list = @project.characters.map{|c|c.love_pose_list(sexes)}
    206: 		        pose_list << Male.new.love_pose_list(sexes)
    207: 		        
    208: 		        pose_list.flatten.each do |pose|%>
  app/models/character.rb:51:in `initialize'
  app/models/character.rb:51:in `new'
  app/models/character.rb:51:in `block in love_pose_list'
  app/models/character.rb:47:in `each'
  app/models/character.rb:47:in `love_pose_list'
  app/views/scenes/edit.html.erb:205:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2169064540'
  app/views/scenes/edit.html.erb:205:in `_app_views_scenes_edit_html_erb__4331478716365463348_2169064540'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.3ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:49:53 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (130.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 15:49:53.353684', "perishable_token" = 'BYOoKSw4GXuvymodiorX', "updated_at" = '2013-05-23 15:49:53.354893' WHERE "users"."id" = 3[0m
  [1m[35m (46.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 295ms (Views: 174.0ms | ActiveRecord: 50.5ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:57:10 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (151.4ms)
Completed 500 Internal Server Error in 185ms

ActionView::Template::Error (undefined local variable or method `option' for #<#<Class:0x000001049b2148>:0x000001049af1a0>):
    210: 				      <%=form_tag update_event_project_scene_path(@project, @scene)%>
    211: 				        <li class="span2">
    212: 				        <input type="hidden" name="event[type]" value="CharacterPoseEvent">
    213: 			            <input type="hidden" name="event[filename]" value="<%=option.url%>">
    214: 			            <input type="hidden" name="event[character_id]" value="<%=character.id%>">
    215: 			            <input type="hidden" name="event[order_index]" class="event_order" value="<%=@event_index%>">
    216: 			            <input type="hidden" name="event_id" class="event_id" value="">
  app/views/scenes/edit.html.erb:213:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2186112140'
  app/views/scenes/edit.html.erb:209:in `each'
  app/views/scenes/edit.html.erb:209:in `_app_views_scenes_edit_html_erb__4331478716365463348_2186112140'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (40.2ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (47.3ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:57:21 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (24.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:57:21.495082', "perishable_token" = 'Q5jlvM4LHBS5EJn5sGD', "updated_at" = '2013-05-23 15:57:21.496445' WHERE "users"."id" = 3
  [1m[36m (46.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 121ms (Views: 66.4ms | ActiveRecord: 49.3ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:58:01 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (28.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:58:01.204228', "perishable_token" = '2kaRk9o0tBol0TuCyf', "updated_at" = '2013-05-23 15:58:01.204851' WHERE "users"."id" = 3
  [1m[36m (46.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 94ms (Views: 42.0ms | ActiveRecord: 49.4ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 11:59:55 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (25.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 15:59:55.728377', "perishable_token" = 'TNbLCWMMOMisq6PdB7T', "updated_at" = '2013-05-23 15:59:55.729041' WHERE "users"."id" = 3
  [1m[36m (40.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 83ms (Views: 37.6ms | ActiveRecord: 42.7ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 12:01:36 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (29.3ms)
Completed 500 Internal Server Error in 35ms

ActionView::Template::Error (undefined method `love_pose_list' for #<ActiveRecord::Relation:0x00000104b4dbb0>):
    201: 		    <!-- Poses -->
    202: 		      <%if @scene.love_scene?
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 		        pose_list = [@project.characters, Male.new, Female.new].map{|c|c.love_pose_list(sexes)}.flatten
    205: 		       %>
    206: 		       <div class="overlay love-poses" style="display:none">
    207: 			      	<ul class="thumbnails">
  app/views/scenes/edit.html.erb:204:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2188443720'
  app/views/scenes/edit.html.erb:204:in `map'
  app/views/scenes/edit.html.erb:204:in `_app_views_scenes_edit_html_erb__4331478716365463348_2188443720'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.2ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 12:02:27 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (26.0ms)
Completed 500 Internal Server Error in 33ms

ActionView::Template::Error (undefined method `love_pose_list' for #<ActiveRecord::Relation:0x000001028f9eb0>):
    201: 		    <!-- Poses -->
    202: 		      <%if @scene.love_scene?
    203: 		      	sexes = @project.characters.pluck(:sex)
    204: 		        pose_list = [@project.characters].map{|c|c.love_pose_list(sexes)}
    205: 		        pose_list << Male.new.love_pose_list(sexes)
    206: 		        pose_list << Female.new.love_pose_list(sexes)
    207: 		       %>
  app/views/scenes/edit.html.erb:204:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2179903480'
  app/views/scenes/edit.html.erb:204:in `map'
  app/views/scenes/edit.html.erb:204:in `_app_views_scenes_edit_html_erb__4331478716365463348_2179903480'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.2ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 12:02:39 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (25.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:02:39.528411', "perishable_token" = 'fwkFxBglNo34z6LM2PK', "updated_at" = '2013-05-23 16:02:39.529038' WHERE "users"."id" = 3
  [1m[36m (40.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 83ms (Views: 37.6ms | ActiveRecord: 42.5ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:02:51 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"text"=>"Hello", "order_index"=>"1", "type"=>"CharacterSpeaksEvent", "character_id"=>"14"}, "event_id"=>"", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", 14], ["character_name", nil], ["character_type", "Hitomi"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:02:51 UTC +00:00], ["filename", nil], ["order_index", 1], ["scene_id", 17], ["subfilename", nil], ["text", "Hello"], ["type", "CharacterSpeaksEvent"], ["updated_at", Thu, 23 May 2013 16:02:51 UTC +00:00]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 1 AND (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (0.2ms)[0m  [1mUPDATE "events" SET "order_index" = 2, "characters_present" = '--- []
', "updated_at" = '2013-05-23 16:02:51.734476' WHERE "events"."type" IN ('CharacterSpeaksEvent') AND "events"."id" = 147[0m
  [1m[35m (48.7ms)[0m  commit transaction
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", 147]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=2&more_text=&more_text_type=
Completed 302 Found in 88ms (ActiveRecord: 50.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=2&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:02:51 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (27.6ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:02:51.843138', "perishable_token" = 'f7icqgX8Vq130pWEfAre', "updated_at" = '2013-05-23 16:02:51.843807' WHERE "users"."id" = 3
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 48ms (Views: 39.2ms | ActiveRecord: 6.0ms)
Connecting to database specified by database.yml


Started GET "/projects/8/scenes/17/edit?event_index=2&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:03:57 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (27.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:03:57.877667', "perishable_token" = 'hwstcg4jk2AE1uR04ePk', "updated_at" = '2013-05-23 16:03:57.878316' WHERE "users"."id" = 3[0m
  [1m[35m (41.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 86ms (Views: 39.6ms | ActiveRecord: 43.9ms)


Started GET "/projects/8/scenes/17/edit?event_index=2&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:11:51 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (170.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:11:51.393281', "perishable_token" = 'qovWG927VjM9F4KtOmg', "updated_at" = '2013-05-23 16:11:51.394574' WHERE "users"."id" = 3
  [1m[36m (44.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 338ms (Views: 258.3ms | ActiveRecord: 49.5ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:12:02 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "filename"=>"/Character/Female/F/Intimate/y-mia-zoom(a).gif", "character_id"=>"15", "order_index"=>"2"}, "event_id"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:12:02 UTC +00:00], ["filename", "/Character/Female/F/Intimate/y-mia-zoom(a).gif"], ["order_index", 2], ["scene_id", 17], ["subfilename", nil], ["text", nil], ["type", "LovePoseEvent"], ["updated_at", Thu, 23 May 2013 16:12:02 UTC +00:00]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 2 AND (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (0.2ms)[0m  [1mUPDATE "events" SET "order_index" = 3, "characters_present" = '--- []
', "updated_at" = '2013-05-23 16:12:02.814859' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 148[0m
  [1m[35m (46.8ms)[0m  commit transaction
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", 148]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=3
Completed 302 Found in 83ms (ActiveRecord: 48.7ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:12:02 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  Rendered scenes/edit.html.erb within layouts/application (8.9ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (can't convert nil into String):
    27: 			  	 	  		<%unless event.is_a?(NarrationEvent)%>
    28: 			  	 	  		  <span class='muted'><%=event.to_sentence%></span><br/>
    29: 			  	 	  		<%end%>
    30: 			  	 	  		<small class="detail"><%=event.detail%></small>
    31: 
    32: 			  	 	  		<%if @event_index!=event.order_index%></div><%end%>
    33: 			  	 	  		
  app/models/event.rb:76:in `extname'
  app/models/event.rb:76:in `humanize'
  app/models/event.rb:80:in `humanize'
  app/models/events/love_pose_event.rb:11:in `detail'
  app/views/scenes/edit.html.erb:30:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2165031500'
  app/views/scenes/edit.html.erb:19:in `_app_views_scenes_edit_html_erb__4331478716365463348_2165031500'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:12:26 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (214.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:12:26.830342', "perishable_token" = 'uuZyazZi4yH9nYddpHvh', "updated_at" = '2013-05-23 16:12:26.831787' WHERE "users"."id" = 3[0m
  [1m[35m (44.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 333ms (Views: 254.6ms | ActiveRecord: 49.6ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:12:54 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (175.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:12:54.990142', "perishable_token" = '1oFd7pycGs7XwKzxtJbm', "updated_at" = '2013-05-23 16:12:54.991462' WHERE "users"."id" = 3[0m
  [1m[35m (45.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='BackgroundImageEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 342ms (Views: 217.1ms | ActiveRecord: 50.7ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:15:51 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (175.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:15:52.215312', "perishable_token" = 'TuBmSTtpmeTcecjwxQak', "updated_at" = '2013-05-23 16:15:52.216646' WHERE "users"."id" = 3[0m
  [1m[35m (44.7ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 383ms (Views: 259.9ms | ActiveRecord: 49.9ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:16:45 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (177.7ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:16:46.184836', "perishable_token" = '1wJsl95JQKpghzkflwfg', "updated_at" = '2013-05-23 16:16:46.186243' WHERE "users"."id" = 3[0m
  [1m[35m (41.5ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 383ms (Views: 262.9ms | ActiveRecord: 46.5ms)


Started GET "/events/148/delete" for 127.0.0.1 at 2013-05-23 12:19:47 -0400
Processing by EventsController#delete as HTML
  Parameters: {"id"=>"148"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", "148"]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "events" WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = ?  [["id", 148]]
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (44.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=2
Completed 302 Found in 177ms (ActiveRecord: 46.6ms)


Started GET "/projects/8/scenes/17/edit?event_index=2" for 127.0.0.1 at 2013-05-23 12:19:48 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.3ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (85.0ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:19:48.371111', "perishable_token" = 'hFIcCjWvn4FcrkzZLJ7u', "updated_at" = '2013-05-23 16:19:48.372449' WHERE "users"."id" = 3
  [1m[36m (3.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 178ms (Views: 166.9ms | ActiveRecord: 7.2ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:19:57 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "filename"=>"/Character/Female/F/Intimate/y-mia-zoom(a).gif", "character_id"=>"15", "order_index"=>"2"}, "event_id"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:19:57 UTC +00:00], ["filename", "/Character/Female/F/Intimate/y-mia-zoom(a).gif"], ["order_index", 2], ["scene_id", 17], ["subfilename", nil], ["text", nil], ["type", "LovePoseEvent"], ["updated_at", Thu, 23 May 2013 16:19:57 UTC +00:00]]
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 2 AND (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 15ms

NoMethodError (undefined method `[]=' for nil:NilClass):
  app/models/event.rb:67:in `set_characters_present'
  app/models/event.rb:93:in `block in reorder_indexes'
  app/models/event.rb:90:in `each_index'
  app/models/event.rb:90:in `reorder_indexes'
  app/models/event.rb:101:in `check_duplicate_indexes'
  app/controllers/scenes_controller.rb:80:in `block in update_event'
  app/controllers/scenes_controller.rb:79:in `update_event'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.8ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:20:18 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "filename"=>"/Character/Female/F/Intimate/y-mia-zoom(a).gif", "character_id"=>"15", "order_index"=>"2"}, "event_id"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:20:18 UTC +00:00], ["filename", "/Character/Female/F/Intimate/y-mia-zoom(a).gif"], ["order_index", 2], ["scene_id", 17], ["subfilename", nil], ["text", nil], ["type", "LovePoseEvent"], ["updated_at", Thu, 23 May 2013 16:20:18 UTC +00:00]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 2 AND (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (0.2ms)[0m  UPDATE "events" SET "order_index" = 3, "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
', "updated_at" = '2013-05-23 16:20:18.375448' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 149
  [1m[36m (45.7ms)[0m  [1mcommit transaction[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", 149]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=3
Completed 302 Found in 217ms (ActiveRecord: 49.0ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:20:18 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (103.0ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:20:18.590823', "perishable_token" = '4IMeU2EfqaQQaeuKqRd4', "updated_at" = '2013-05-23 16:20:18.592092' WHERE "users"."id" = 3
  [1m[36m (3.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 154ms (Views: 143.8ms | ActiveRecord: 6.6ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:27:18 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  Rendered scenes/edit.html.erb within layouts/application (208.5ms)
Completed 500 Internal Server Error in 242ms

ActionView::Template::Error (undefined method `bg_attribute' for #<Class:0x00000104a8d3b0>):
    158: 		        <li class="span2">
    159: 		        <%=form_tag update_event_project_scene_path(@project, @scene)%>
    160: 		          <input type="hidden" name="event[type]" value="<%=bg_event_type%>">
    161: 		          <input type="hidden" name="event[<%=bg_event_type.bg_attribute%>]" value="<%=option.url%>">
    162: 		          <input type="hidden" name="event_id" class="event_id" value="">
    163: 		          <input type="hidden" name="event[order_index]" class="event_order" value="<%=@event_index%>">
    164: 		          <a class="submitable thumbnail">
  app/views/scenes/edit.html.erb:161:in `block in _app_views_scenes_edit_html_erb__4331478716365463348_2187574040'
  app/views/scenes/edit.html.erb:157:in `each'
  app/views/scenes/edit.html.erb:157:in `_app_views_scenes_edit_html_erb__4331478716365463348_2187574040'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.2ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:27:33 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (176.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:27:34.214706', "perishable_token" = 'XBacEhAtVzHsHUFwQS', "updated_at" = '2013-05-23 16:27:34.216030' WHERE "users"."id" = 3
  [1m[36m (41.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 379ms (Views: 258.9ms | ActiveRecord: 46.2ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:36:50 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (220.9ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:36:50.403513', "perishable_token" = 'wSLN9XAyInwdVWtTWR', "updated_at" = '2013-05-23 16:36:50.404792' WHERE "users"."id" = 3
  [1m[36m (44.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 341ms (Views: 262.2ms | ActiveRecord: 49.3ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:37:59 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (181.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:38:00.097503', "perishable_token" = 'vWqHdVVnnWjSvwaun5de', "updated_at" = '2013-05-23 16:38:00.098715' WHERE "users"."id" = 3
  [1m[36m (46.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 348ms (Views: 221.3ms | ActiveRecord: 51.6ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:38:20 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (182.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:38:20.460588', "perishable_token" = 'xZM49NfFqbZC48Imwa6E', "updated_at" = '2013-05-23 16:38:20.462085' WHERE "users"."id" = 3
  [1m[36m (45.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 399ms (Views: 266.1ms | ActiveRecord: 50.4ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:39:19 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "subfilename"=>"/LoveImage/Base/her_bedroom.jpg", "order_index"=>"3"}, "event_id"=>"149", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", "149"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 7ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: subfilename):
  app/controllers/scenes_controller.rb:80:in `block in update_event'
  app/controllers/scenes_controller.rb:79:in `update_event'


  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolebeguesse/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:39:49 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "subfilename"=>"/LoveImage/Base/her_bedroom.jpg", "order_index"=>"3"}, "event_id"=>"149", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", "149"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  UPDATE "events" SET "subfilename" = '/LoveImage/Base/her_bedroom.jpg', "updated_at" = '2013-05-23 16:39:49.791577', "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 149
  [1m[36m (46.8ms)[0m  [1mcommit transaction[0m
  [1m[35mLovePoseEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = ? LIMIT 1  [["id", 149]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=3
Completed 302 Found in 171ms (ActiveRecord: 49.1ms)


Started GET "/projects/8/scenes/17/edit?event_index=3" for 127.0.0.1 at 2013-05-23 12:39:49 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (153.1ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:39:50.098662', "perishable_token" = 'crYdu9g0AoaPoPMJnbhz', "updated_at" = '2013-05-23 16:39:50.099869' WHERE "users"."id" = 3
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 245ms (Views: 233.7ms | ActiveRecord: 7.2ms)


Started GET "/events/147/delete" for 127.0.0.1 at 2013-05-23 12:40:01 -0400
Processing by EventsController#delete as HTML
  Parameters: {"id"=>"147"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", "147"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "events" WHERE "events"."type" IN ('CharacterSpeaksEvent') AND "events"."id" = ?[0m  [["id", 147]]
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (0.1ms)[0m  [1mUPDATE "events" SET "order_index" = 2, "updated_at" = '2013-05-23 16:40:01.926286', "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 149[0m
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=2
Completed 302 Found in 17ms (ActiveRecord: 5.7ms)


Started GET "/projects/8/scenes/17/edit?event_index=2" for 127.0.0.1 at 2013-05-23 12:40:01 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (30.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:40:01.996567', "perishable_token" = 'hUDIYlqOrmtK23SCey2e', "updated_at" = '2013-05-23 16:40:01.997212' WHERE "users"."id" = 3
  [1m[36m (3.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 94ms (Views: 85.1ms | ActiveRecord: 6.0ms)


Started GET "/events/145/delete" for 127.0.0.1 at 2013-05-23 12:40:07 -0400
Processing by EventsController#delete as HTML
  Parameters: {"id"=>"145"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", "145"]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "events" WHERE "events"."type" IN ('BackgroundImageEvent', 'LovePoseEvent') AND "events"."id" = ?[0m  [["id", 145]]
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (0.2ms)[0m  [1mUPDATE "events" SET "order_index" = 1, "updated_at" = '2013-05-23 16:40:07.686709', "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 149[0m
  [1m[35m (43.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=1
Completed 302 Found in 57ms (ActiveRecord: 45.2ms)


Started GET "/projects/8/scenes/17/edit?event_index=1" for 127.0.0.1 at 2013-05-23 12:40:07 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"1", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 1) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8[0m
  Rendered scenes/edit.html.erb within layouts/application (26.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "last_request_at" = '2013-05-23 16:40:07.795664', "perishable_token" = 'YzScgKkEbmj1GjNUNxy', "updated_at" = '2013-05-23 16:40:07.796310' WHERE "users"."id" = 3
  [1m[36m (3.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
Completed 200 OK in 47ms (Views: 38.8ms | ActiveRecord: 5.8ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:40:18 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"text"=>"This is fun", "order_index"=>"1", "type"=>"CharacterSpeaksEvent", "character_id"=>"14"}, "event_id"=>"", "more_text"=>"14", "more_text_type"=>"CharacterSpeaksEvent", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mCharacter Load (0.3ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["character_id", 14], ["character_name", nil], ["character_type", "Hitomi"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:40:18 UTC +00:00], ["filename", nil], ["order_index", 1], ["scene_id", 17], ["subfilename", nil], ["text", "This is fun"], ["type", "CharacterSpeaksEvent"], ["updated_at", Thu, 23 May 2013 16:40:18 UTC +00:00]]
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 1 AND (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC
  [1m[36m (0.2ms)[0m  [1mUPDATE "events" SET "order_index" = 2, "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
', "updated_at" = '2013-05-23 16:40:18.380984' WHERE "events"."type" IN ('CharacterSpeaksEvent') AND "events"."id" = 150[0m
  [1m[35m (47.2ms)[0m  commit transaction
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", 150]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=2&more_text=14&more_text_type=CharacterSpeaksEvent
Completed 302 Found in 68ms (ActiveRecord: 49.2ms)


Started GET "/projects/8/scenes/17/edit?event_index=2&more_text=14&more_text_type=CharacterSpeaksEvent" for 127.0.0.1 at 2013-05-23 12:40:18 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"2", "more_text"=>"14", "more_text_type"=>"CharacterSpeaksEvent", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (33.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:40:18.490592', "perishable_token" = 'ayeiZtnTuz3bBVwuhi3d', "updated_at" = '2013-05-23 16:40:18.491265' WHERE "users"."id" = 3[0m
  [1m[35m (3.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 1) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 54ms (Views: 43.4ms | ActiveRecord: 6.9ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:40:22 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"text"=>"Really", "order_index"=>"2", "type"=>"CharacterSpeaksEvent", "character_id"=>"14"}, "event_id"=>"", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["character_id", 14], ["character_name", nil], ["character_type", "Hitomi"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:40:22 UTC +00:00], ["filename", nil], ["order_index", 2], ["scene_id", 17], ["subfilename", nil], ["text", "Really"], ["type", "CharacterSpeaksEvent"], ["updated_at", Thu, 23 May 2013 16:40:22 UTC +00:00]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 2 AND (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (0.2ms)[0m  UPDATE "events" SET "order_index" = 3, "characters_present" = '---
- - 15
 - /Character/Female/F/Intimate/y-mia-zoom(a).gif
', "updated_at" = '2013-05-23 16:40:22.881131' WHERE "events"."type" IN ('CharacterSpeaksEvent') AND "events"."id" = 151
  [1m[36m (49.2ms)[0m  [1mcommit transaction[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", 151]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=3&more_text=&more_text_type=
Completed 302 Found in 66ms (ActiveRecord: 50.9ms)


Started GET "/projects/8/scenes/17/edit?event_index=3&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:40:22 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"3", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.2ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 3) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (27.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:40:22.987416', "perishable_token" = 'nONSlJFdP5Lf47M6IkQ0', "updated_at" = '2013-05-23 16:40:22.988038' WHERE "users"."id" = 3[0m
  [1m[35m (3.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 49ms (Views: 39.1ms | ActiveRecord: 5.9ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:44:09 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"type"=>"LovePoseEvent", "filename"=>"/Character/Male/M/Intimate/edgeworth-zoom(a).gif", "character_id"=>"15", "order_index"=>"3"}, "event_id"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:44:09 UTC +00:00], ["filename", "/Character/Male/M/Intimate/edgeworth-zoom(a).gif"], ["order_index", 3], ["scene_id", 17], ["subfilename", nil], ["text", nil], ["type", "LovePoseEvent"], ["updated_at", Thu, 23 May 2013 16:44:09 UTC +00:00]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 3 AND (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (0.2ms)[0m  UPDATE "events" SET "order_index" = 4, "characters_present" = '---
- - 15
 - /Character/Male/M/Intimate/edgeworth-zoom(a).gif
', "updated_at" = '2013-05-23 16:44:09.938308' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 152
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 3) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mUPDATE "events" SET "order_index" = 4, "characters_present" = '---
- - 15
 - /Character/Male/M/Intimate/edgeworth-zoom(a).gif
', "updated_at" = '2013-05-23 16:44:09.938308', "subfilename" = '/LoveImage/Base/her_bedroom.jpg' WHERE "events"."type" IN ('LovePoseEvent') AND "events"."id" = 152[0m
  [1m[35m (45.1ms)[0m  commit transaction
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1[0m  [["id", 152]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=4
Completed 302 Found in 229ms (ActiveRecord: 48.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:44:10 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (104.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:44:10.179875', "perishable_token" = 'cpHmHaYUTrSLcgOou', "updated_at" = '2013-05-23 16:44:10.181137' WHERE "users"."id" = 3[0m
  [1m[35m (3.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 155ms (Views: 143.8ms | ActiveRecord: 7.0ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:45:23 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (71.8ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:45:23.907017', "perishable_token" = 'ZRHJ7hCRNuZFtmMjVpc4', "updated_at" = '2013-05-23 16:45:23.907648' WHERE "users"."id" = 3[0m
  [1m[35m (43.7ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 134ms (Views: 83.1ms | ActiveRecord: 46.7ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:46:49 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.2ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.3ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (29.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:46:49.714884', "perishable_token" = 'fQ8LnJXv3OFyQBZaITp', "updated_at" = '2013-05-23 16:46:49.715496' WHERE "users"."id" = 3[0m
  [1m[35m (46.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 95ms (Views: 42.5ms | ActiveRecord: 49.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:48:33 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (223.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:48:33.786684', "perishable_token" = 'BQvSaRFP3GPxzUPURvVk', "updated_at" = '2013-05-23 16:48:33.787881' WHERE "users"."id" = 3[0m
  [1m[35m (46.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 346ms (Views: 263.9ms | ActiveRecord: 51.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:49:13 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.3ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (224.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:49:14.023424', "perishable_token" = 'OFptm8gVea9xWnSTgLcZ', "updated_at" = '2013-05-23 16:49:14.024870' WHERE "users"."id" = 3[0m
  [1m[35m (44.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 344ms (Views: 264.3ms | ActiveRecord: 48.9ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:50:42 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (81.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:50:42.854361', "perishable_token" = 'A7XZP9NrrTKTpw3w1MAY', "updated_at" = '2013-05-23 16:50:42.855015' WHERE "users"."id" = 3[0m
  [1m[35m (47.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
Completed 200 OK in 146ms (Views: 92.7ms | ActiveRecord: 50.3ms)


Started PUT "/projects/8/scenes/17" for 127.0.0.1 at 2013-05-23 12:50:53 -0400
Processing by ScenesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "scene"=>{"custom_description"=>"Da Love Scene"}, "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mUPDATE "scenes" SET "custom_description" = 'Da Love Scene', "updated_at" = '2013-05-23 16:50:53.455520' WHERE "scenes"."id" = 17[0m
  [1m[35m (43.5ms)[0m  commit transaction
Redirected to http://localhost:3000/projects/8/scenes/17/edit
Completed 302 Found in 51ms (ActiveRecord: 44.3ms)


Started GET "/projects/8/scenes/17/edit" for 127.0.0.1 at 2013-05-23 12:50:53 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.2ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 2) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 2) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (21.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:50:53.551555', "perishable_token" = '85GHkFhqZP9mC2wzSvo1', "updated_at" = '2013-05-23 16:50:53.552197' WHERE "users"."id" = 3[0m
  [1m[35m (303.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 342ms (Views: 32.5ms | ActiveRecord: 306.1ms)


Started GET "/projects/8/scenes/17/edit?event_index=4" for 127.0.0.1 at 2013-05-23 12:51:10 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"4", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 4) LIMIT 1[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 4) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE (scene_id=17 )[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (23.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:51:10.935642', "perishable_token" = 'FHNpfK2YM7Awv4yop14', "updated_at" = '2013-05-23 16:51:10.936397' WHERE "users"."id" = 3[0m
  [1m[35m (39.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 82ms (Views: 37.0ms | ActiveRecord: 42.2ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:51:17 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"text"=>"I concur", "order_index"=>"4", "type"=>"CharacterSpeaksEvent", "character_id"=>"15"}, "event_id"=>"", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.3ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.2ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:51:17 UTC +00:00], ["filename", nil], ["order_index", 4], ["scene_id", 17], ["subfilename", nil], ["text", "I concur"], ["type", "CharacterSpeaksEvent"], ["updated_at", Thu, 23 May 2013 16:51:17 UTC +00:00]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 4 AND (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (0.2ms)[0m  UPDATE "events" SET "order_index" = 5, "characters_present" = '---
- - 15
 - /Character/Male/M/Intimate/edgeworth-zoom(a).gif
', "updated_at" = '2013-05-23 16:51:17.738722' WHERE "events"."type" IN ('CharacterSpeaksEvent') AND "events"."id" = 153
  [1m[36m (42.2ms)[0m  [1mcommit transaction[0m
  [1m[35mEvent Load (0.4ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", 153]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=5&more_text=&more_text_type=
Completed 302 Found in 75ms (ActiveRecord: 44.8ms)


Started GET "/projects/8/scenes/17/edit?event_index=5&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:51:17 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"5", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 5) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 5) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (24.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:51:17.846123', "perishable_token" = 'JAI1gbr5AQF4CNWWDbN', "updated_at" = '2013-05-23 16:51:17.846775' WHERE "users"."id" = 3[0m
  [1m[35m (3.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 42ms (Views: 33.3ms | ActiveRecord: 5.6ms)


Started POST "/projects/8/scenes/17/update_event" for 127.0.0.1 at 2013-05-23 12:51:29 -0400
Processing by ScenesController#update_event as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uzTG9Fhs6zaf6ELdr+CqwPwZJpXQXqGFS1CkZcIFHTg=", "event"=>{"text"=>"Really...", "order_index"=>"5", "type"=>"NarrationEvent", "character_id"=>"15"}, "event_id"=>"", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[35mScene Load (0.1ms)[0m  SELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1  [["id", "17"]]
  [1m[36mProject Load (0.1ms)[0m  [1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mCharacter Load (0.2ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("character_id", "character_name", "character_type", "characters_present", "created_at", "filename", "order_index", "scene_id", "subfilename", "text", "type", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["character_id", 15], ["character_name", nil], ["character_type", "Narrator"], ["characters_present", nil], ["created_at", Thu, 23 May 2013 16:51:29 UTC +00:00], ["filename", nil], ["order_index", 5], ["scene_id", 17], ["subfilename", nil], ["text", "Really..."], ["type", "NarrationEvent"], ["updated_at", Thu, 23 May 2013 16:51:29 UTC +00:00]]
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE "events"."order_index" = 5 AND (scene_id=17 )
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE "events"."scene_id" = 17 ORDER BY order_index ASC, id ASC[0m
  [1m[35m (0.2ms)[0m  UPDATE "events" SET "order_index" = 6, "characters_present" = '---
- - 15
 - /Character/Male/M/Intimate/edgeworth-zoom(a).gif
', "updated_at" = '2013-05-23 16:51:29.337064' WHERE "events"."type" IN ('NarrationEvent') AND "events"."id" = 154
  [1m[36m (44.8ms)[0m  [1mcommit transaction[0m
  [1m[35mEvent Load (0.1ms)[0m  SELECT "events".* FROM "events" WHERE "events"."id" = ? LIMIT 1  [["id", 154]]
Redirected to http://localhost:3000/projects/8/scenes/17/edit?event_index=6&more_text=&more_text_type=
Completed 302 Found in 78ms (ActiveRecord: 46.5ms)


Started GET "/projects/8/scenes/17/edit?event_index=6&more_text=&more_text_type=" for 127.0.0.1 at 2013-05-23 12:51:29 -0400
Processing by ScenesController#edit as HTML
  Parameters: {"event_index"=>"6", "more_text"=>"", "more_text_type"=>"", "project_id"=>"8", "id"=>"17"}
  [1m[36mScene Load (0.1ms)[0m  [1mSELECT "scenes".* FROM "scenes" WHERE "scenes"."id" = ? LIMIT 1[0m  [["id", "17"]]
  [1m[35mProject Load (0.1ms)[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 8 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "events" WHERE "events"."scene_id" = 17[0m
  [1m[35mEvent Load (0.2ms)[0m  SELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index = 6) LIMIT 1
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) AND (order_index <= 6) AND (type='LovePoseEvent') ORDER BY order_index DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "events" WHERE (scene_id=17 )
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT "events".* FROM "events" WHERE (scene_id=17 ) ORDER BY order_index ASC, id ASC[0m
  [1m[35mCharacter Load (0.1ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 14 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."id" = 15 LIMIT 1[0m
  [1m[35mCharacter Load (0.2ms)[0m  SELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8 AND "characters"."type" = 'Narrator' LIMIT 1
  [1m[36mCharacter Load (0.1ms)[0m  [1mSELECT "characters".* FROM "characters" WHERE "characters"."project_id" = 8[0m
  [1m[35m (0.2ms)[0m  SELECT "characters"."sex" FROM "characters" WHERE "characters"."project_id" = 8
  Rendered scenes/edit.html.erb within layouts/application (71.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_request_at" = '2013-05-23 16:51:29.485396', "perishable_token" = 'waktSJZW78cGskc8rhaB', "updated_at" = '2013-05-23 16:51:29.486189' WHERE "users"."id" = 3[0m
  [1m[35m (3.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "projects" WHERE "projects"."owner_id" = '3'[0m
Completed 200 OK in 90ms (Views: 81.2ms | ActiveRecord: 5.8ms)
